<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Adventure Bag System - 7 Tabs Edition</title>
  <link rel="stylesheet" href="neo-styles.css" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #1a1a1f 0%, #2a2a35 50%, #1a1a1f 100%);
      color: #f5f5f5;
      overflow: hidden;
      height: 100vh;
      position: relative;
    }
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 140, 66, 0.05) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
    #bag-system-root { 
      width: 100%; 
      height: 100%; 
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="bag-system-root"></div>
  
  <script src="neo-game-data.js"></script>
  <script src="neo-bag-system.js"></script>
  <script>
    // Initialize game state
    window.gameState = {
      gold: 5000,
      gems: 100,
      keys: 5,
      tickets: 10,
      level: 1,
      xp: 0,
      xpToNext: 100,
      inventory: {
        items: [],
        gear: [],
        pets: [],
        vehicles: [],
        robots: [],
        spirits: [],
        skills: []
      },
      equipped: {
        A1: {
          weapon: null, offhand: null, head: null, chest: null,
          gloves: null, pants: null, boots: null,
          ring1: null, ring2: null, necklace: null
        },
        UNIQUE: {
          weapon: null, offhand: null, head: null, chest: null,
          gloves: null, pants: null, boots: null,
          ring1: null, ring2: null, necklace: null
        },
        MISSY: {
          weapon: null, offhand: null, head: null, chest: null,
          gloves: null, pants: null, boots: null,
          ring1: null, ring2: null, necklace: null
        }
      },
      equippedSkills: {
        A1: { S1: null, S2: null, S3: null },
        UNIQUE: { S1: null, S2: null, S3: null },
        MISSY: { S1: null, S2: null, S3: null }
      },
      characters: {
        A1: { name: 'A1', title: 'Boss Slayer', color: '#ff4d4f', level: 1 },
        UNIQUE: { name: 'UNIQUE', title: 'Tech Support', color: '#74b9ff', level: 1 },
        MISSY: { name: 'MISSY', title: 'Cat Angel', color: '#ff69b4', level: 1 }
      }
    };

    // Seed initial data
    if (window.NeoGameData) {
      // Add starter items
      window.gameState.inventory.items = [
        { id: 'item_hp_potion', name: 'Health Potion', icon: 'ðŸ§ª', category: 'consumable', quantity: 10, rarity: 'common' },
        { id: 'item_mp_potion', name: 'Mana Potion', icon: 'ðŸ’™', category: 'consumable', quantity: 8, rarity: 'common' }
      ];

      // Add starter gear
      const gearData = window.NeoGameData.gear;
      if (gearData && gearData.length > 0) {
        window.gameState.inventory.gear = gearData.slice(0, 5).map(g => ({
          ...g,
          upgradeLevel: 0,
          locked: false
        }));
      }

      // Add starter pets
      const petsData = window.NeoGameData.pets;
      if (petsData && petsData.length > 0) {
        window.gameState.inventory.pets = petsData.slice(0, 2).map(p => ({
          ...p,
          level: 1,
          xp: 0
        }));
      }

      // Add starter vehicles
      const vehiclesData = window.NeoGameData.vehicles;
      if (vehiclesData && vehiclesData.length > 0) {
        window.gameState.inventory.vehicles = vehiclesData.slice(0, 1).map(v => ({
          ...v,
          level: 1
        }));
      }

      // Add starter robots/AI
      const robotsData = window.NeoGameData.robots;
      if (robotsData && robotsData.length > 0) {
        window.gameState.inventory.robots = robotsData.slice(0, 1).map(r => ({
          ...r,
          level: 1
        }));
      }

      // Add all skills
      const skillsData = window.NeoGameData.skills;
      if (skillsData && skillsData.length > 0) {
        window.gameState.inventory.skills = skillsData.map(s => ({
          ...s,
          unlocked: s.unlockLevel <= 1
        }));

        // Auto-equip default skills
        const a1Skills = skillsData.filter(s => s.characterId === 'A1' && s.slot <= 3);
        const uniqueSkills = skillsData.filter(s => s.characterId === 'UNIQUE' && s.slot <= 3);
        const missySkills = skillsData.filter(s => s.characterId === 'MISSY' && s.slot <= 3);

        if (a1Skills.length >= 3) {
          window.gameState.equippedSkills.A1 = {
            S1: a1Skills[0], S2: a1Skills[1], S3: a1Skills[2]
          };
        }
        if (uniqueSkills.length >= 3) {
          window.gameState.equippedSkills.UNIQUE = {
            S1: uniqueSkills[0], S2: uniqueSkills[1], S3: uniqueSkills[2]
          };
        }
        if (missySkills.length >= 3) {
          window.gameState.equippedSkills.MISSY = {
            S1: missySkills[0], S2: missySkills[1], S3: missySkills[2]
          };
        }
      }
    }

    // Initialize bag system
    document.addEventListener('DOMContentLoaded', () => {
      if (window.NeoBagSystem) {
        const bagSystem = new window.NeoBagSystem({
          containerId: 'bag-system-root'
        });
        bagSystem.init();
        bagSystem.open();
        window.neoBagSystem = bagSystem;
        window.bagSystem = bagSystem; // Alias for compatibility
        console.log('âœ… Adventure Bag System initialized');
      } else {
        console.error('âŒ NeoBagSystem not found');
      }
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'b' && window.neoBagSystem) {
        window.neoBagSystem.toggle();
      } else if (e.key === 'Escape' && window.neoBagSystem) {
        window.neoBagSystem.close();
      }
    });
  </script>
</body>
</html>

