# Combat System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                    2.5D ISOMETRIC CITY ENGINE                               â”‚
â”‚                    (mixed-city-with-ultra-interiors.html)                   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Canvas    â”‚      â”‚ Game Loop  â”‚      â”‚  Enemies   â”‚                    â”‚
â”‚  â”‚  (ctx)     â”‚      â”‚ (deltaTime)â”‚      â”‚  System    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚         â”‚                   â”‚                   â”‚                           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â”‚                                               â”‚
â”‚                             â”‚ INTEGRATION                                   â”‚
â”‚                             â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CITY-COMBAT BRIDGE                                â”‚  â”‚
â”‚  â”‚              (city-combat-bridge.js)                                 â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â€¢ Hooks into game loop                                             â”‚  â”‚
â”‚  â”‚  â€¢ Hooks into render                                                â”‚  â”‚
â”‚  â”‚  â€¢ Manages enemy detection                                          â”‚  â”‚
â”‚  â”‚  â€¢ Global initialization                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                         COMBAT SYSTEM                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      COMBAT ENGINE (core/)                            â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  CombatEngine Class                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ activeCharacter: 'A1' | 'UNIQUE' | 'MISSY'                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ currentHP: 1000                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ rage: 0-100                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ combo: 0                                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ rageActive: boolean (2x ATK mode)                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ update(deltaTime, enemies)                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ activateSkill(skillId, targetX, targetY)                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ switchCharacter(characterId)                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ activateRage()                                                â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                                             â”‚
â”‚              â”‚ USES                                                        â”‚
â”‚              â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      SKILL SYSTEM (skills/)                           â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  skill-definitions.js                                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ SKILL_DATABASE[90]                                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - A1 skills (30)                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Unique skills (30)                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Missy skills (30)                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ getSkillById(id)                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ getSkillsByCharacter(characterId)                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ getEquippedSkills(characterId)                               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  skill-executor.js                                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ executeSkill(skillId, sourceX, sourceY, targetX, targetY)   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ executeBasicAttack()                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Pattern detection:                                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Multi-hit (3, 4, 5, 6, 10, 16, 20, 30 hits)               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Beams (channeled, 1-2s duration)                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Explosions (AoE)                                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Summons                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Teleports                                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Shields                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Cooldown tracking                                            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  projectile-manager.js                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ spawnProjectile()                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ spawnMultiHit(hitCount)                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ spawnBeam(duration)                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ spawnExplosion(radius)                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ update(deltaTime, enemies)                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Collision detection                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Damage application                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Lifetime management                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ render(ctx)                                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Projectile rendering (glow effects)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Beam rendering                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Explosion particles (20 per blast)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ applyDamage(enemy, damage, skill)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Status effects: burn (3s), freeze (2s), stun (1s)        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         UI SYSTEM (ui/)                               â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  combat-hud.js                                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ renderCharacterInfo()                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ renderHPBar()     - Green â†’ Orange â†’ Red                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ renderRageGauge() - Yellow-Red gradient, pulses at 100     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ renderComboCounter() - Color changes: white â†’ cyan â†’       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                           orange â†’ magenta                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ renderShieldIndicator() - Amount + duration bar            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  skill-buttons.js                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ onSkillClick(slotNumber)   - S1-S5                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ onUltimateClick()          - X1                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ onAttackClick()            - ATK                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ onSwitchClick()            - SWITCH (A1â†’Uniqueâ†’Missy)      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ onRageClick()              - RAGE (2x ATK)                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ updateButton(buttonId, skillId) - Cooldown display         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ update() - Button opacity based on cooldown progress       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  damage-numbers.js                                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ spawn(x, y, damage, options)                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ update(deltaTime) - Float up, fall with gravity            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ render(ctx)                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Color-coded by element (10 colors)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Critical hits: purple, enlarged, pulsing                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Healing: green with + prefix                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    - Status icons: ğŸ”¥â„ï¸âš¡â¤ï¸                                    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      EVENT SYSTEM                                     â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  window.combatEvents (EventTarget)                                   â”‚ â”‚
â”‚  â”‚  â€¢ 'damageDealt'     â†’ Increments rage, combo                       â”‚ â”‚
â”‚  â”‚  â€¢ 'skillUsed'       â†’ Triggers VFX                                  â”‚ â”‚
â”‚  â”‚  â€¢ 'characterSwitched' â†’ Updates UI                                  â”‚ â”‚
â”‚  â”‚  â€¢ 'rageActivated'   â†’ 2x ATK mode for 10s                          â”‚ â”‚
â”‚  â”‚  â€¢ 'playerDamaged'   â†’ HP bar update                                â”‚ â”‚
â”‚  â”‚  â€¢ 'playerHealed'    â†’ Green damage number (+HP)                    â”‚ â”‚
â”‚  â”‚  â€¢ 'playerDied'      â†’ Check revive                                 â”‚ â”‚
â”‚  â”‚  â€¢ 'playerRevived'   â†’ Restore 50% HP                               â”‚ â”‚
â”‚  â”‚  â€¢ 'summonSpawned'   â†’ Spawn ally VFX                               â”‚ â”‚
â”‚  â”‚  â€¢ 'teleport'        â†’ VFX at start/end                             â”‚ â”‚
â”‚  â”‚  â€¢ 'shieldActivated' â†’ Shield UI                                    â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA FLOW                                          â”‚
â”‚                                                                             â”‚
â”‚  1. User clicks S1 button                                                  â”‚
â”‚     â†“                                                                       â”‚
â”‚  2. SkillButtonHandler.onSkillClick(1)                                     â”‚
â”‚     â†“                                                                       â”‚
â”‚  3. CombatEngine.activateSkill('A1_S1', targetX, targetY)                 â”‚
â”‚     â†“                                                                       â”‚
â”‚  4. SkillExecutor.executeSkill('A1_S1', ...)                              â”‚
â”‚     â†“                                                                       â”‚
â”‚  5. Pattern detection: "3-hit combo" detected                              â”‚
â”‚     â†“                                                                       â”‚
â”‚  6. ProjectileManager.spawnMultiHit(skill, ..., 3)                        â”‚
â”‚     â†“                                                                       â”‚
â”‚  7. 3 projectiles spawn, spread in arc                                     â”‚
â”‚     â†“                                                                       â”‚
â”‚  8. ProjectileManager.update() - collision detection                       â”‚
â”‚     â†“                                                                       â”‚
â”‚  9. Hit enemy â†’ applyDamage(enemy, 150, skill)                            â”‚
â”‚     â†“                                                                       â”‚
â”‚  10. Dispatch 'damageDealt' event                                          â”‚
â”‚     â†“                                                                       â”‚
â”‚  11. CombatEngine.onDamageDealt() - add rage +2%, combo +1                â”‚
â”‚     â†“                                                                       â”‚
â”‚  12. DamageNumberManager.spawn() - "150" in orange-red (FIRE)             â”‚
â”‚     â†“                                                                       â”‚
â”‚  13. Render: Projectile glow, damage number float, HP bar update           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RENDERING LAYERS                                       â”‚
â”‚                                                                             â”‚
â”‚  Layer 1: City (buildings, NPCs, vehicles) â† City engine                   â”‚
â”‚  Layer 2: Combat projectiles & VFX        â† ProjectileManager              â”‚
â”‚  Layer 3: Damage numbers                  â† DamageNumberManager            â”‚
â”‚  Layer 4: Combat HUD                       â† CombatHUD                      â”‚
â”‚                                                                             â”‚
â”‚  All drawn in correct Z-order, no conflicts!                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
