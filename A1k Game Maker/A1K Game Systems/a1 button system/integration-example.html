<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A1 Button System - Integration Example</title>
  <link rel="stylesheet" href="a1-buttons.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: ui-sans-serif, system-ui, sans-serif;
      background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
      color: #FFF;
      overflow: hidden;
    }

    .game-canvas {
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 30%, rgba(122, 213, 255, 0.15), transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 122, 217, 0.15), transparent 50%),
        linear-gradient(180deg, #1a1a2e 0%, #2d2d44 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .game-status {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(122, 213, 255, 0.3);
      border-radius: 16px;
      padding: 20px;
      min-width: 300px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    .game-status h2 {
      margin: 0 0 16px 0;
      font-size: 20px;
      color: #7AD5FF;
    }

    .status-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .status-item:last-child {
      border-bottom: none;
    }

    .status-label {
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
    }

    .status-value {
      color: #FFF;
      font-weight: 700;
      font-size: 14px;
    }

    .player-sprite {
      width: 60px;
      height: 60px;
      background: radial-gradient(circle, #7AD5FF, #4A9DD9);
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 30px rgba(122, 213, 255, 0.6);
      transition: all 0.05s linear;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
    }

    .robot-sprite {
      width: 50px;
      height: 50px;
      background: radial-gradient(circle, #BA55D3, #8B35B5);
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 20px rgba(186, 85, 211, 0.6);
      transition: all 0.1s linear;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .skill-effect {
      position: absolute;
      pointer-events: none;
      animation: skillBlast 0.5s ease-out forwards;
    }

    @keyframes skillBlast {
      from {
        transform: scale(0.5);
        opacity: 1;
      }
      to {
        transform: scale(3);
        opacity: 0;
      }
    }

    .intro-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100000;
      animation: fadeOut 0.5s ease 2s forwards;
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        pointer-events: none;
      }
    }

    .intro-text {
      text-align: center;
      padding: 40px;
    }

    .intro-text h1 {
      font-size: 48px;
      margin-bottom: 16px;
      background: linear-gradient(135deg, #7AD5FF, #BA55D3, #FF7AD9);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .intro-text p {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 8px;
    }
  </style>
</head>

<body>
  <!-- Intro -->
  <div class="intro-overlay">
    <div class="intro-text">
      <h1>üéÆ A1 Button System</h1>
      <p>Integration Example with AI Robot</p>
      <p>Use joystick to move ‚Ä¢ Skills to attack ‚Ä¢ AI button to summon robot</p>
    </div>
  </div>

  <!-- Game Canvas -->
  <div class="game-canvas" id="game-canvas">
    <div class="player-sprite" id="player">üéÆ</div>
  </div>

  <!-- Game Status -->
  <div class="game-status">
    <h2>üéØ Game State</h2>
    <div class="status-item">
      <span class="status-label">Position</span>
      <span class="status-value" id="pos-display">0, 0</span>
    </div>
    <div class="status-item">
      <span class="status-label">Joystick</span>
      <span class="status-value" id="joy-display">Idle</span>
    </div>
    <div class="status-item">
      <span class="status-label">Last Action</span>
      <span class="status-value" id="action-display">-</span>
    </div>
    <div class="status-item">
      <span class="status-label">Robot</span>
      <span class="status-value" id="robot-display">None</span>
    </div>
  </div>

  <!-- Button System Container -->
  <div id="button-container"></div>

  <!-- Integration Script -->
  <script type="module">
    import { A1ButtonSystem } from './a1-buttons.js';

    // Game State
    const gameState = {
      player: {
        x: window.innerWidth / 2,
        y: window.innerHeight / 2,
        vx: 0,
        vy: 0,
        speed: 300 // pixels per second
      },
      robot: null,
      skills: {
        S1: { ready: true, cooldown: 2.5 },
        S2: { ready: true, cooldown: 4.0 },
        S3: { ready: true, cooldown: 6.0 }
      }
    };

    // DOM Elements
    const playerEl = document.getElementById('player');
    const canvas = document.getElementById('game-canvas');
    const posDisplay = document.getElementById('pos-display');
    const joyDisplay = document.getElementById('joy-display');
    const actionDisplay = document.getElementById('action-display');
    const robotDisplay = document.getElementById('robot-display');

    // Initialize Button System
    const buttonSystem = new A1ButtonSystem({
      theme: 'candy',
      enableAI: true,
      enableJoystick: true,
      enableSkills: true,
      enableUtilities: true,
      enableAttack: true
    });

    buttonSystem.mount('#button-container');

    // ===== JOYSTICK INTEGRATION =====
    buttonSystem.on('joystick:move', (data) => {
      gameState.player.vx = data.x;
      gameState.player.vy = data.y;
      
      const magnitude = Math.sqrt(data.x * data.x + data.y * data.y);
      joyDisplay.textContent = `X: ${data.x.toFixed(2)}, Y: ${data.y.toFixed(2)}`;
      joyDisplay.style.color = magnitude > 0.5 ? '#7AD5FF' : '#FFF';
    });

    buttonSystem.on('joystick:end', () => {
      gameState.player.vx = 0;
      gameState.player.vy = 0;
      joyDisplay.textContent = 'Idle';
      joyDisplay.style.color = '#FFF';
    });

    // ===== SKILL INTEGRATION =====
    buttonSystem.on('skill:activate', (data) => {
      const skill = data.skill;
      
      if (!gameState.skills[skill].ready) {
        actionDisplay.textContent = `${skill} on cooldown!`;
        actionDisplay.style.color = '#FF6464';
        return;
      }

      // Cast skill
      castSkill(skill);
      
      // Start cooldown
      gameState.skills[skill].ready = false;
      buttonSystem.setSkillReady(skill, false);
      
      // Restore after cooldown
      setTimeout(() => {
        gameState.skills[skill].ready = true;
        buttonSystem.setSkillReady(skill, true);
      }, gameState.skills[skill].cooldown * 1000);
      
      actionDisplay.textContent = `Cast ${skill}!`;
      actionDisplay.style.color = '#7AD5FF';
    });

    function castSkill(skill) {
      // Create visual effect
      const effect = document.createElement('div');
      effect.className = 'skill-effect';
      effect.style.left = gameState.player.x + 'px';
      effect.style.top = gameState.player.y + 'px';
      effect.style.width = '60px';
      effect.style.height = '60px';
      effect.style.borderRadius = '50%';
      
      if (skill === 'S1') {
        effect.style.background = 'radial-gradient(circle, rgba(255, 122, 217, 0.8), transparent)';
        effect.textContent = 'üí•';
      } else if (skill === 'S2') {
        effect.style.background = 'radial-gradient(circle, rgba(122, 248, 200, 0.8), transparent)';
        effect.textContent = '‚ú®';
      } else if (skill === 'S3') {
        effect.style.background = 'radial-gradient(circle, rgba(122, 213, 255, 0.8), transparent)';
        effect.textContent = '‚ö°';
      }
      
      effect.style.display = 'flex';
      effect.style.alignItems = 'center';
      effect.style.justifyContent = 'center';
      effect.style.fontSize = '32px';
      
      canvas.appendChild(effect);
      setTimeout(() => canvas.removeChild(effect), 500);
    }

    // ===== ATTACK INTEGRATION =====
    buttonSystem.on('attack:press', (data) => {
      const attackEmojis = {
        attack: '‚öîÔ∏è',
        jump: 'ü¶ò',
        rage: 'üò°',
        shield: 'üõ°Ô∏è'
      };
      
      actionDisplay.textContent = `${attackEmojis[data.attack]} ${data.attack.toUpperCase()}`;
      actionDisplay.style.color = '#FF7AD9';
      
      // Visual feedback
      playerEl.style.transform = 'scale(1.2)';
      setTimeout(() => playerEl.style.transform = 'scale(1)', 200);
    });

    // ===== UTILITY INTEGRATION =====
    buttonSystem.on('utility:press', (data) => {
      actionDisplay.textContent = `Utility: ${data.utility}`;
      actionDisplay.style.color = '#FFD166';
    });

    // ===== AI ROBOT INTEGRATION =====
    buttonSystem.on('ai:summon', (data) => {
      // Create robot if not exists
      if (!gameState.robot) {
        gameState.robot = {
          type: data.robotType,
          x: gameState.player.x - 100,
          y: gameState.player.y,
          mode: 'follow',
          targetMode: 'nearest',
          element: null
        };
        
        // Create robot sprite
        const robotEl = document.createElement('div');
        robotEl.className = 'robot-sprite';
        robotEl.id = 'robot';
        robotEl.textContent = 'ü§ñ';
        robotEl.style.left = gameState.robot.x + 'px';
        robotEl.style.top = gameState.robot.y + 'px';
        canvas.appendChild(robotEl);
        
        gameState.robot.element = robotEl;
        
        robotDisplay.textContent = `${data.robotType} (Active)`;
        robotDisplay.style.color = '#BA55D3';
        
        actionDisplay.textContent = `Summoned ${data.robotType} robot!`;
        actionDisplay.style.color = '#BA55D3';
      }
    });

    buttonSystem.on('ai:mode-change', (data) => {
      if (gameState.robot) {
        gameState.robot.mode = data.mode;
        actionDisplay.textContent = `Robot mode: ${data.mode}`;
        actionDisplay.style.color = '#BA55D3';
      }
    });

    buttonSystem.on('ai:target-change', (data) => {
      if (gameState.robot) {
        gameState.robot.targetMode = data.targetMode;
        actionDisplay.textContent = `Robot target: ${data.targetMode}`;
        actionDisplay.style.color = '#BA55D3';
      }
    });

    buttonSystem.on('ai:command', (data) => {
      actionDisplay.textContent = `AI: "${data.command}"`;
      actionDisplay.style.color = '#E9D7FF';
    });

    // ===== GAME LOOP =====
    let lastTime = performance.now();

    function gameLoop(currentTime) {
      const dt = (currentTime - lastTime) / 1000; // delta time in seconds
      lastTime = currentTime;

      // Update player position
      gameState.player.x += gameState.player.vx * gameState.player.speed * dt;
      gameState.player.y += gameState.player.vy * gameState.player.speed * dt;

      // Clamp to screen bounds
      const margin = 30;
      gameState.player.x = Math.max(margin, Math.min(window.innerWidth - margin, gameState.player.x));
      gameState.player.y = Math.max(margin, Math.min(window.innerHeight - margin, gameState.player.y));

      // Update player sprite
      playerEl.style.left = gameState.player.x + 'px';
      playerEl.style.top = gameState.player.y + 'px';

      // Update position display
      posDisplay.textContent = `${Math.round(gameState.player.x)}, ${Math.round(gameState.player.y)}`;

      // Update robot (simple follow behavior)
      if (gameState.robot && gameState.robot.element) {
        const dx = gameState.player.x - gameState.robot.x - 80;
        const dy = gameState.player.y - gameState.robot.y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist > 10) {
          const step = Math.min(250 * dt, dist); // Robot speed
          gameState.robot.x += (dx / dist) * step;
          gameState.robot.y += (dy / dist) * step;
        }

        gameState.robot.element.style.left = gameState.robot.x + 'px';
        gameState.robot.element.style.top = gameState.robot.y + 'px';
      }

      requestAnimationFrame(gameLoop);
    }

    // Start game loop
    requestAnimationFrame(gameLoop);

    // Auto-demo after 3 seconds
    setTimeout(() => {
      buttonSystem.setSkillReady('S1', true);
      buttonSystem.setSkillReady('S2', true);
      buttonSystem.setSkillReady('S3', true);
      buttonSystem.setJoystickReady(true);
    }, 3000);

    console.log('üéÆ A1 Button System Integration Example loaded!');
    console.log('üìù Try moving with the joystick, casting skills, and summoning a robot!');
  </script>
</body>

</html>

