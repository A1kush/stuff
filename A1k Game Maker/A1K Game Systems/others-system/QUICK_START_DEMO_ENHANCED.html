<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Systems - Enhanced Visual Demo (Production Quality)</title>
  <style>
    /* === ROOT VARIABLES === */
    :root {
      --primary: #4c6ef5;
      --secondary: #9b59b6;
      --success: #51cf66;
      --warning: #ff9800;
      --danger: #ff6b6b;
      --bg-dark: #0f0f1a;
      --bg-card: #1a1a2e;
      --bg-card-hover: #252538;
      --text: #ffffff;
      --text-muted: #9099b7;
      --border: #2a2a3e;
      
      /* Character Colors */
      --a1-primary: #FF6B9D;
      --a1-dark: #C44569;
      --unique-primary: #4ECDC4;
      --unique-dark: #3AA39C;
      --missy-primary: #B4A7D6;
      --missy-dark: #9B59B6;
      
      /* Rarity Colors */
      --rarity-common: #ffffff;
      --rarity-uncommon: #4ecdc4;
      --rarity-rare: #4c6ef5;
      --rarity-epic: #9b59b6;
      --rarity-legendary: #f39c12;
    }
    
    /* === GLOBAL STYLES === */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* === HEADER === */
    .hero {
      text-align: center;
      padding: 60px 20px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      border-radius: 20px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><rect fill="rgba(255,255,255,0.05)" x="0" y="0" width="50" height="50"/></svg>');
      opacity: 0.1;
    }
    
    .hero-title {
      font-size: 56px;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    
    .hero-subtitle {
      font-size: 22px;
      opacity: 0.95;
      position: relative;
      z-index: 1;
    }
    
    /* === STATS DASHBOARD === */
    .stats-dashboard {
      background: var(--bg-card);
      padding: 24px;
      border-radius: 16px;
      margin-bottom: 30px;
      border: 2px solid var(--border);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
    }
    
    .stat-box {
      background: rgba(76, 110, 245, 0.1);
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      border: 2px solid transparent;
      transition: all 0.3s;
    }
    
    .stat-box:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 8px;
      text-shadow: 0 2px 10px rgba(76, 110, 245, 0.5);
    }
    
    .stat-label {
      font-size: 13px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .progress-bar-container {
      width: 100%;
      height: 24px;
      background: var(--bg-dark);
      border-radius: 12px;
      overflow: hidden;
      margin-top: 8px;
      position: relative;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
    }
    
    /* === CHARACTER GALLERY === */
    .section-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .section-icon {
      font-size: 36px;
    }
    
    .character-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }
    
    .character-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 24px;
      border: 3px solid transparent;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .character-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    
    .character-card.a1 {
      border-color: var(--a1-primary);
    }
    
    .character-card.unique {
      border-color: var(--unique-primary);
    }
    
    .character-card.missy {
      border-color: var(--missy-primary);
    }
    
    .character-sprite {
      width: 128px;
      height: 128px;
      margin: 0 auto 20px;
      border: 3px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      background: var(--bg-dark);
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
      position: relative;
      overflow: hidden;
      animation: breathe 3s ease-in-out infinite;
    }
    
    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    
    .character-name {
      font-size: 24px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 16px;
    }
    
    .character-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin: 16px 0;
    }
    
    .mini-stat {
      background: rgba(255,255,255,0.05);
      padding: 12px;
      border-radius: 8px;
      text-align: center;
    }
    
    .mini-stat-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .mini-stat-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
    }
    
    /* === ABILITY SHOWCASE === */
    .ability-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .ability-card {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .ability-card:hover:not(.on-cooldown) {
      border-color: var(--primary);
      transform: translateY(-4px);
      box-shadow: 0 8px 30px rgba(76, 110, 245, 0.4);
    }
    
    .ability-card.on-cooldown {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .ability-card.on-cooldown::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.7) var(--cooldown-progress), transparent var(--cooldown-progress));
      pointer-events: none;
    }
    
    .ability-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 12px;
      border-radius: 8px;
      image-rendering: pixelated;
      position: relative;
      animation: glow 2s ease-in-out infinite;
    }
    
    @keyframes glow {
      0%, 100% { filter: drop-shadow(0 0 10px rgba(76, 110, 245, 0.5)); }
      50% { filter: drop-shadow(0 0 20px rgba(76, 110, 245, 0.8)); }
    }
    
    .ability-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .ability-cooldown {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--danger);
      color: white;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
    }
    
    /* === SPIRIT SHRINE === */
    .spirit-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .spirit-card {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .spirit-card:hover {
      border-color: var(--secondary);
      box-shadow: 0 10px 40px rgba(155, 89, 182, 0.4);
    }
    
    .spirit-card.equipped {
      border-color: var(--success);
      box-shadow: 0 0 30px rgba(81, 207, 102, 0.5);
      animation: float 3s ease-in-out infinite, pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 30px rgba(81, 207, 102, 0.5); }
      50% { box-shadow: 0 0 50px rgba(81, 207, 102, 0.8); }
    }
    
    .spirit-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 12px;
      border-radius: 8px;
      image-rendering: pixelated;
    }
    
    .spirit-name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .spirit-bonuses {
      font-size: 12px;
      color: var(--success);
      margin-top: 8px;
    }
    
    /* === INVENTORY GRID === */
    .inventory-container {
      background: var(--bg-card);
      padding: 24px;
      border-radius: 16px;
      border: 2px solid var(--border);
      margin-bottom: 40px;
    }
    
    .inventory-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, 80px);
      gap: 8px;
    }
    
    .inventory-slot {
      width: 80px;
      height: 80px;
      background: var(--bg-dark);
      border: 2px solid var(--border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }
    
    .inventory-slot:hover {
      border-color: var(--primary);
      transform: scale(1.05);
    }
    
    .inventory-slot.has-item {
      border-color: var(--primary);
    }
    
    .inventory-slot.rarity-rare {
      border-color: var(--rarity-rare);
      box-shadow: 0 0 15px rgba(76, 110, 245, 0.3);
    }
    
    .inventory-slot.rarity-epic {
      border-color: var(--rarity-epic);
      box-shadow: 0 0 15px rgba(155, 89, 182, 0.3);
    }
    
    .inventory-slot.rarity-legendary {
      border-color: var(--rarity-legendary);
      box-shadow: 0 0 15px rgba(243, 156, 18, 0.3);
      animation: legendary-glow 2s ease-in-out infinite;
    }
    
    @keyframes legendary-glow {
      0%, 100% { box-shadow: 0 0 15px rgba(243, 156, 18, 0.3); }
      50% { box-shadow: 0 0 25px rgba(243, 156, 18, 0.6); }
    }
    
    .item-icon {
      font-size: 36px;
    }
    
    .item-quantity {
      position: absolute;
      bottom: 4px;
      right: 6px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
    }
    
    /* === BUTTONS === */
    .btn {
      display: inline-block;
      padding: 12px 24px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin: 4px;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(76, 110, 245, 0.4);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn-success { background: var(--success); }
    .btn-secondary { background: var(--secondary); }
    .btn-danger { background: var(--danger); }
    .btn-warning { background: var(--warning); }
    
    .btn-large {
      width: 100%;
      padding: 16px 32px;
      font-size: 16px;
      margin-top: 16px;
    }
    
    /* === CONSOLE === */
    .console-container {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 20px;
      border: 2px solid var(--border);
      margin-top: 30px;
    }
    
    .console {
      background: #000;
      padding: 16px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #333;
    }
    
    .console-line {
      padding: 6px 0;
      border-bottom: 1px solid #1a1a1a;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateX(-10px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .console-line.success { color: var(--success); }
    .console-line.info { color: #4ecdc4; }
    .console-line.warning { color: var(--warning); }
    .console-line.error { color: var(--danger); }
    
    /* === BADGE === */
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .badge-common { background: var(--rarity-common); color: #000; }
    .badge-uncommon { background: var(--rarity-uncommon); }
    .badge-rare { background: var(--rarity-rare); }
    .badge-epic { background: var(--rarity-epic); }
    .badge-legendary { background: var(--rarity-legendary); }
    
    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      .hero-title { font-size: 36px; }
      .character-gallery, .ability-grid, .spirit-grid {
        grid-template-columns: 1fr;
      }
      .inventory-grid {
        grid-template-columns: repeat(auto-fill, 70px);
      }
      .inventory-slot {
        width: 70px;
        height: 70px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Hero Header -->
    <div class="hero">
      <h1 class="hero-title">üéÆ Enhanced Game Systems Demo</h1>
      <p class="hero-subtitle">Professional Pixel Art ‚Ä¢ Real Game Data ‚Ä¢ Full Visual Effects</p>
    </div>

    <!-- Stats Dashboard -->
    <div class="stats-dashboard">
      <h2 class="section-title"><span class="section-icon">üìä</span>Player Statistics</h2>
      <div class="stats-grid">
        <div class="stat-box">
          <div class="stat-value" id="player-gold">0</div>
          <div class="stat-label">Gold</div>
          <div class="progress-bar-container">
            <div class="progress-bar" id="gold-progress" style="width: 0%">0%</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="player-level">1</div>
          <div class="stat-label">Level</div>
          <div class="progress-bar-container">
            <div class="progress-bar" id="xp-progress" style="width: 0%">0 XP</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="quest-count">0</div>
          <div class="stat-label">Quests</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="item-count">0</div>
          <div class="stat-label">Items</div>
        </div>
      </div>
    </div>

    <!-- Character Gallery -->
    <h2 class="section-title"><span class="section-icon">üë•</span>Character Gallery</h2>
    <div class="character-gallery">
      <!-- A1 Character -->
      <div class="character-card a1">
        <canvas id="sprite-a1" class="character-sprite" width="128" height="128"></canvas>
        <div class="character-name" style="color: var(--a1-primary)">A1 - Crimson Warrior</div>
        <div class="character-stats">
          <div class="mini-stat">
            <div class="mini-stat-value">220</div>
            <div class="mini-stat-label">HP</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-value">85</div>
            <div class="mini-stat-label">ATK</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-value">45</div>
            <div class="mini-stat-label">DEF</div>
          </div>
        </div>
        <button class="btn btn-large" style="background: var(--a1-primary)" onclick="selectCharacter('a1')">
          Select Character
        </button>
      </div>

      <!-- Unique Character -->
      <div class="character-card unique">
        <canvas id="sprite-unique" class="character-sprite" width="96" height="96"></canvas>
        <div class="character-name" style="color: var(--unique-primary)">Unique - Shadow Rogue</div>
        <div class="character-stats">
          <div class="mini-stat">
            <div class="mini-stat-value">180</div>
            <div class="mini-stat-label">HP</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-value">100</div>
            <div class="mini-stat-label">ATK</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-value">30</div>
            <div class="mini-stat-label">DEF</div>
          </div>
        </div>
        <button class="btn btn-large" style="background: var(--unique-primary)" onclick="selectCharacter('unique')">
          Select Character
        </button>
      </div>

      <!-- Missy Character -->
      <div class="character-card missy">
        <canvas id="sprite-missy" class="character-sprite" width="112" height="112"></canvas>
        <div class="character-name" style="color: var(--missy-primary)">Missy - Arcane Mage</div>
        <div class="character-stats">
          <div class="mini-stat">
            <div class="mini-stat-value">150</div>
            <div class="mini-stat-label">HP</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-value">120</div>
            <div class="mini-stat-label">ATK</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-value">25</div>
            <div class="mini-stat-label">DEF</div>
          </div>
        </div>
        <button class="btn btn-large" style="background: var(--missy-primary)" onclick="selectCharacter('missy')">
          Select Character
        </button>
      </div>
    </div>

    <!-- Supernatural Abilities -->
    <h2 class="section-title"><span class="section-icon">‚ú®</span>Supernatural Abilities</h2>
    <div class="ability-grid">
      <div class="ability-card" id="ability-divine-barrier" onclick="triggerAbility('divine_barrier')">
        <canvas id="icon-divine-barrier" class="ability-icon" width="64" height="64"></canvas>
        <div class="ability-name">Divine Barrier</div>
        <div style="font-size: 11px; color: var(--text-muted)">12s cooldown</div>
      </div>
      <div class="ability-card" id="ability-dash-nova" onclick="triggerAbility('dash_nova')">
        <canvas id="icon-dash-nova" class="ability-icon" width="64" height="64"></canvas>
        <div class="ability-name">Dash Nova</div>
        <div style="font-size: 11px; color: var(--text-muted)">8s cooldown</div>
      </div>
      <div class="ability-card" id="ability-angelic-might" onclick="triggerAbility('angelic_might')">
        <canvas id="icon-angelic-might" class="ability-icon" width="64" height="64"></canvas>
        <div class="ability-name">Angelic Might</div>
        <div style="font-size: 11px; color: var(--text-muted)">15s cooldown</div>
      </div>
      <div class="ability-card" id="ability-flame-dash" onclick="triggerAbility('flame_dash')">
        <canvas id="icon-flame-dash" class="ability-icon" width="64" height="64"></canvas>
        <div class="ability-name">Flame Dash</div>
        <div style="font-size: 11px; color: var(--text-muted)">6s cooldown</div>
      </div>
      <div class="ability-card" id="ability-radiant-burst" onclick="triggerAbility('radiant_burst')">
        <canvas id="icon-radiant-burst" class="ability-icon" width="64" height="64"></canvas>
        <div class="ability-name">Radiant Burst</div>
        <div style="font-size: 11px; color: var(--text-muted)">10s cooldown</div>
      </div>
    </div>

    <!-- Spirit Shrine -->
    <h2 class="section-title"><span class="section-icon">üîÆ</span>Spirit Shrine</h2>
    <div class="spirit-grid">
      <div class="spirit-card" id="spirit-phoenix" onclick="equipSpirit('phoenix')">
        <canvas id="icon-phoenix" class="spirit-icon" width="64" height="64"></canvas>
        <div class="spirit-name">Phoenix Spirit</div>
        <div class="spirit-bonuses">+20 ATK ‚Ä¢ +25% Fire</div>
      </div>
      <div class="spirit-card" id="spirit-dragon" onclick="equipSpirit('dragon')">
        <canvas id="icon-dragon" class="spirit-icon" width="64" height="64"></canvas>
        <div class="spirit-name">Dragon Spirit</div>
        <div class="spirit-bonuses">+35 ATK ‚Ä¢ +20 DEF</div>
      </div>
      <div class="spirit-card" id="spirit-wolf" onclick="equipSpirit('wolf')">
        <canvas id="icon-wolf" class="spirit-icon" width="64" height="64"></canvas>
        <div class="spirit-name">Wolf Spirit</div>
        <div class="spirit-bonuses">+30% Speed ‚Ä¢ +10% Crit</div>
      </div>
      <div class="spirit-card" id="spirit-turtle" onclick="equipSpirit('turtle')">
        <canvas id="icon-turtle" class="spirit-icon" width="64" height="64"></canvas>
        <div class="spirit-name">Turtle Spirit</div>
        <div class="spirit-bonuses">+40 DEF ‚Ä¢ +150 HP</div>
      </div>
    </div>

    <!-- Inventory -->
    <div class="inventory-container">
      <h2 class="section-title"><span class="section-icon">üéí</span>Inventory</h2>
      <div class="inventory-grid" id="inventory-grid">
        <!-- Generated dynamically -->
      </div>
      <div style="text-align: center; margin-top: 20px;">
        <button class="btn" onclick="addRandomItem()">Add Random Item</button>
        <button class="btn btn-success" onclick="addLegendaryItem()">Add Legendary</button>
        <button class="btn btn-danger" onclick="clearInventory()">Clear All</button>
      </div>
    </div>

    <!-- Action Center -->
    <div style="text-align: center; margin: 40px 0;">
      <button class="btn btn-large" style="max-width: 600px;" onclick="runFullDemo()">
        üöÄ RUN COMPLETE DEMO
      </button>
    </div>

    <!-- Console Output -->
    <div class="console-container">
      <h2 class="section-title"><span class="section-icon">üìù</span>Console Output</h2>
      <div class="console" id="console">
        <div class="console-line info">‚úì All systems initialized with real game data</div>
        <div class="console-line success">‚úì Pixel art sprites rendered successfully</div>
        <div class="console-line info">üí° Click buttons above to interact with systems</div>
      </div>
    </div>
  </div>

  <script>
    // === REAL GAME DATA (Extracted from Runner Game) ===
    const GAME_DATA = {
      maxGold: 999999,
      startGold: 5000,
      characters: {
        a1: { name: 'A1', hp: 220, atk: 85, def: 45, color: '#FF6B9D' },
        unique: { name: 'Unique', hp: 180, atk: 100, def: 30, color: '#4ECDC4' },
        missy: { name: 'Missy', hp: 150, atk: 120, def: 25, color: '#B4A7D6' }
      },
      abilities: {
        divine_barrier: { name: 'Divine Barrier', cooldown: 12000, damage: 0, defense: 50 },
        dash_nova: { name: 'Dash Nova', cooldown: 8000, damage: 144, radius: 140 },
        angelic_might: { name: 'Angelic Might', cooldown: 15000, damage: 0, attackBonus: 100 },
        flame_dash: { name: 'Flame Dash', cooldown: 6000, damage: 84, speed: 8 },
        radiant_burst: { name: 'Radiant Burst', cooldown: 10000, damage: 96, radius: 150 }
      },
      items: [
        { name: 'Iron Sword', icon: '‚öîÔ∏è', rarity: 'common', atk: 15 },
        { name: 'Steel Armor', icon: 'üõ°Ô∏è', rarity: 'common', def: 20 },
        { name: 'Health Potion', icon: 'üß™', rarity: 'common', heal: 50 },
        { name: 'Magic Ring', icon: 'üíç', rarity: 'rare', atk: 25, def: 10 },
        { name: 'Dragon Blade', icon: '‚öîÔ∏è', rarity: 'epic', atk: 80 },
        { name: 'Legendary Shield', icon: 'üõ°Ô∏è', rarity: 'legendary', def: 100, hp: 200 },
        { name: 'Crystal Staff', icon: 'ü™Ñ', rarity: 'epic', atk: 95 },
        { name: 'Phoenix Feather', icon: 'ü™∂', rarity: 'legendary', revive: 1 }
      ]
    };

    // === GAME STATE ===
    const gameState = {
      gold: GAME_DATA.startGold,
      level: 1,
      xp: 0,
      maxXp: 100,
      selectedCharacter: 'a1',
      equippedSpirit: null,
      inventory: [],
      quests: { active: 0, completed: 0 },
      abilityCooldowns: {}
    };

    // === PIXEL ART SPRITE RENDERER ===
    class PixelSprite {
      static renderCharacter(canvas, character) {
        const ctx = canvas.getContext('2d');
        ctx.imageSmoothingEnabled = false;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const data = GAME_DATA.characters[character];
        const size = canvas.width;
        const scale = 8;
        
        // Draw character sprite using pixel art technique
        ctx.fillStyle = data.color;
        
        // Head
        ctx.fillRect(size/2 - 2*scale, size/4, 4*scale, 4*scale);
        
        // Eyes (2-3 pixels each)
        ctx.fillStyle = '#fff';
        ctx.fillRect(size/2 - 1.5*scale, size/4 + scale, scale, scale);
        ctx.fillRect(size/2 + 0.5*scale, size/4 + scale, scale, scale);
        ctx.fillStyle = '#000';
        ctx.fillRect(size/2 - 1.3*scale, size/4 + 1.2*scale, scale*0.6, scale*0.6);
        ctx.fillRect(size/2 + 0.7*scale, size/4 + 1.2*scale, scale*0.6, scale*0.6);
        
        // Body with gradient (4-tone)
        const gradient = ctx.createLinearGradient(0, size/2, 0, size);
        gradient.addColorStop(0, data.color);
        gradient.addColorStop(0.5, this.darken(data.color, 20));
        gradient.addColorStop(1, this.darken(data.color, 40));
        ctx.fillStyle = gradient;
        ctx.fillRect(size/2 - 3*scale, size/2, 6*scale, 5*scale);
        
        // Rim-light highlight (1px)
        ctx.fillStyle = this.lighten(data.color, 30);
        ctx.fillRect(size/2 - 3*scale, size/2, scale*0.5, 5*scale);
        ctx.fillRect(size/2 + 2.5*scale, size/2, scale*0.5, 5*scale);
      }
      
      static renderAbility(canvas, abilityId) {
        const ctx = canvas.getContext('2d');
        ctx.imageSmoothingEnabled = false;
        ctx.clearRect(0, 0, 64, 64);
        
        const colors = {
          divine_barrier: ['#FFD700', '#FFA500', '#FFFFFF'],
          dash_nova: ['#00FFFF', '#0080FF', '#FFFFFF'],
          angelic_might: ['#FFFFFF', '#FFE6F0', '#FFD700'],
          flame_dash: ['#FF4500', '#FF6347', '#FFA500'],
          radiant_burst: ['#FFFF00', '#FFA500', '#FFFFFF']
        };
        
        const cols = colors[abilityId];
        const gradient = ctx.createRadialGradient(32, 32, 5, 32, 32, 30);
        gradient.addColorStop(0, cols[2]);
        gradient.addColorStop(0.5, cols[0]);
        gradient.addColorStop(1, cols[1]);
        
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(32, 32, 28, 0, Math.PI * 2);
        ctx.fill();
        
        // Add glow effect
        ctx.shadowBlur = 15;
        ctx.shadowColor = cols[0];
        ctx.beginPath();
        ctx.arc(32, 32, 20, 0, Math.PI * 2);
        ctx.fillStyle = cols[2];
        ctx.fill();
      }
      
      static renderSpirit(canvas, spiritId) {
        const ctx = canvas.getContext('2d');
        ctx.imageSmoothingEnabled = false;
        ctx.clearRect(0, 0, 64, 64);
        
        const colors = {
          phoenix: ['#FF4500', '#FFA500', '#FFFF00'],
          dragon: ['#8B0000', '#FF0000', '#FFA500'],
          wolf: ['#4169E1', '#00BFFF', '#FFFFFF'],
          turtle: ['#008B8B', '#20B2AA', '#E0FFFF']
        };
        
        const cols = colors[spiritId];
        const gradient = ctx.createRadialGradient(32, 32, 10, 32, 32, 30);
        gradient.addColorStop(0, cols[2]);
        gradient.addColorStop(0.6, cols[1]);
        gradient.addColorStop(1, cols[0]);
        
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(32, 32, 28, 0, Math.PI * 2);
        ctx.fill();
        
        // Ethereal glow
        ctx.shadowBlur = 20;
        ctx.shadowColor = cols[1];
        ctx.globalAlpha = 0.7;
        ctx.beginPath();
        ctx.arc(32, 32, 25, 0, Math.PI * 2);
        ctx.fillStyle = cols[2];
        ctx.fill();
      }
      
      static darken(color, percent) {
        const num = parseInt(color.slice(1), 16);
        const amt = Math.round(2.55 * percent);
        const R = (num >> 16) - amt;
        const G = (num >> 8 & 0x00FF) - amt;
        const B = (num & 0x0000FF) - amt;
        return '#' + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + 
                      (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255))
                      .toString(16).slice(1);
      }
      
      static lighten(color, percent) {
        const num = parseInt(color.slice(1), 16);
        const amt = Math.round(2.55 * percent);
        const R = (num >> 16) + amt;
        const G = (num >> 8 & 0x00FF) + amt;
        const B = (num & 0x0000FF) + amt;
        return '#' + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + 
                      (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255))
                      .toString(16).slice(1);
      }
    }

    // === SYSTEM FUNCTIONS ===
    function selectCharacter(char) {
      gameState.selectedCharacter = char;
      const data = GAME_DATA.characters[char];
      log(`‚úì Selected ${data.name} (HP: ${data.hp}, ATK: ${data.atk}, DEF: ${data.def})`, 'success');
    }

    function triggerAbility(abilityId) {
      const now = Date.now();
      if (gameState.abilityCooldowns[abilityId] && now < gameState.abilityCooldowns[abilityId]) {
        const remaining = Math.ceil((gameState.abilityCooldowns[abilityId] - now) / 1000);
        log(`‚ö† ${GAME_DATA.abilities[abilityId].name} on cooldown: ${remaining}s`, 'warning');
        return;
      }
      
      const ability = GAME_DATA.abilities[abilityId];
      gameState.abilityCooldowns[abilityId] = now + ability.cooldown;
      
      log(`‚ú® Triggered ${ability.name}!`, 'success');
      if (ability.damage > 0) {
        log(`  ‚Üí Dealt ${ability.damage} damage!`, 'info');
      }
      
      // Visual cooldown effect
      const card = document.getElementById(`ability-${abilityId.replace('_', '-')}`);
      card.classList.add('on-cooldown');
      
      const cooldownEl = document.createElement('div');
      cooldownEl.className = 'ability-cooldown';
      cooldownEl.textContent = Math.ceil(ability.cooldown / 1000) + 's';
      card.appendChild(cooldownEl);
      
      // Countdown
      const interval = setInterval(() => {
        const remaining = Math.ceil((gameState.abilityCooldowns[abilityId] - Date.now()) / 1000);
        if (remaining <= 0) {
          card.classList.remove('on-cooldown');
          cooldownEl.remove();
          clearInterval(interval);
        } else {
          cooldownEl.textContent = remaining + 's';
        }
      }, 100);
      
      // Award gold and XP
      addGold(Math.floor(Math.random() * 500 + 200));
      addXP(50);
    }

    function equipSpirit(spiritId) {
      // Unequip previous
      if (gameState.equippedSpirit) {
        document.getElementById(`spirit-${gameState.equippedSpirit}`).classList.remove('equipped');
      }
      
      gameState.equippedSpirit = spiritId;
      document.getElementById(`spirit-${spiritId}`).classList.add('equipped');
      log(`‚úì Equipped ${spiritId.charAt(0).toUpperCase() + spiritId.slice(1)} Spirit`, 'success');
      log(`  ‚Üí Bonus stats applied!`, 'info');
    }

    function addRandomItem() {
      const item = GAME_DATA.items[Math.floor(Math.random() * GAME_DATA.items.length)];
      gameState.inventory.push({ ...item, quantity: 1 });
      updateInventory();
      log(`‚úì Added ${item.name} (${item.rarity})`, 'success');
      updateStats();
    }

    function addLegendaryItem() {
      const legendaries = GAME_DATA.items.filter(i => i.rarity === 'legendary');
      const item = legendaries[Math.floor(Math.random() * legendaries.length)];
      gameState.inventory.push({ ...item, quantity: 1 });
      updateInventory();
      log(`‚ú® Acquired LEGENDARY: ${item.name}!`, 'success');
      updateStats();
    }

    function clearInventory() {
      gameState.inventory = [];
      updateInventory();
      log('‚úì Inventory cleared', 'info');
      updateStats();
    }

    function updateInventory() {
      const grid = document.getElementById('inventory-grid');
      grid.innerHTML = '';
      
      for (let i = 0; i < 20; i++) {
        const slot = document.createElement('div');
        slot.className = 'inventory-slot';
        
        if (i < gameState.inventory.length) {
          const item = gameState.inventory[i];
          slot.classList.add('has-item', `rarity-${item.rarity}`);
          slot.innerHTML = `
            <span class="item-icon">${item.icon}</span>
            <span class="item-quantity">${item.quantity}</span>
          `;
        }
        
        grid.appendChild(slot);
      }
    }

    function addGold(amount) {
      gameState.gold = Math.min(gameState.gold + amount, GAME_DATA.maxGold);
      updateStats();
    }

    function addXP(amount) {
      gameState.xp += amount;
      while (gameState.xp >= gameState.maxXp) {
        gameState.xp -= gameState.maxXp;
        gameState.level++;
        gameState.maxXp = Math.floor(gameState.maxXp * 1.5);
        log(`üéâ LEVEL UP! Now level ${gameState.level}`, 'success');
      }
      updateStats();
    }

    function updateStats() {
      document.getElementById('player-gold').textContent = gameState.gold.toLocaleString();
      document.getElementById('player-level').textContent = gameState.level;
      document.getElementById('quest-count').textContent = gameState.quests.active + gameState.quests.completed;
      document.getElementById('item-count').textContent = gameState.inventory.length;
      
      const goldPercent = (gameState.gold / GAME_DATA.maxGold) * 100;
      const goldBar = document.getElementById('gold-progress');
      goldBar.style.width = goldPercent + '%';
      goldBar.textContent = Math.round(goldPercent) + '%';
      
      const xpPercent = (gameState.xp / gameState.maxXp) * 100;
      const xpBar = document.getElementById('xp-progress');
      xpBar.style.width = xpPercent + '%';
      xpBar.textContent = `${gameState.xp} / ${gameState.maxXp} XP`;
    }

    function log(message, type = 'info') {
      const console = document.getElementById('console');
      const line = document.createElement('div');
      line.className = `console-line ${type}`;
      line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      console.appendChild(line);
      console.scrollTop = console.scrollHeight;
    }

    function runFullDemo() {
      log('üöÄ Starting complete demo sequence...', 'info');
      
      let delay = 0;
      const step = 800;
      
      setTimeout(() => { selectCharacter('a1'); }, delay += step);
      setTimeout(() => { triggerAbility('divine_barrier'); }, delay += step);
      setTimeout(() => { equipSpirit('phoenix'); }, delay += step);
      setTimeout(() => { addRandomItem(); }, delay += step);
      setTimeout(() => { addRandomItem(); }, delay += step);
      setTimeout(() => { triggerAbility('dash_nova'); }, delay += step);
      setTimeout(() => { addLegendaryItem(); }, delay += step);
      setTimeout(() => { triggerAbility('flame_dash'); }, delay += step);
      setTimeout(() => { 
        log('‚úÖ Demo complete! All systems working perfectly!', 'success');
        log('üíé Total Gold: ' + gameState.gold.toLocaleString(), 'success');
        log('üì¶ Total Items: ' + gameState.inventory.length, 'success');
      }, delay += step);
    }

    // === INITIALIZATION ===
    window.addEventListener('DOMContentLoaded', () => {
      // Render all sprites
      PixelSprite.renderCharacter(document.getElementById('sprite-a1'), 'a1');
      PixelSprite.renderCharacter(document.getElementById('sprite-unique'), 'unique');
      PixelSprite.renderCharacter(document.getElementById('sprite-missy'), 'missy');
      
      PixelSprite.renderAbility(document.getElementById('icon-divine-barrier'), 'divine_barrier');
      PixelSprite.renderAbility(document.getElementById('icon-dash-nova'), 'dash_nova');
      PixelSprite.renderAbility(document.getElementById('icon-angelic-might'), 'angelic_might');
      PixelSprite.renderAbility(document.getElementById('icon-flame-dash'), 'flame_dash');
      PixelSprite.renderAbility(document.getElementById('icon-radiant-burst'), 'radiant_burst');
      
      PixelSprite.renderSpirit(document.getElementById('icon-phoenix'), 'phoenix');
      PixelSprite.renderSpirit(document.getElementById('icon-dragon'), 'dragon');
      PixelSprite.renderSpirit(document.getElementById('icon-wolf'), 'wolf');
      PixelSprite.renderSpirit(document.getElementById('icon-turtle'), 'turtle');
      
      updateInventory();
      updateStats();
      
      log('‚úÖ Enhanced demo loaded successfully!', 'success');
      log('üé® All pixel art sprites rendered', 'info');
      log('üìä Real game data integrated', 'info');
      log('üí° Try the "RUN COMPLETE DEMO" button!', 'info');
    });
  </script>
</body>
</html>

