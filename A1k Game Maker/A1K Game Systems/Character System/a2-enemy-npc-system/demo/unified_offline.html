<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A2 Complete Entity System - Offline (103 Entities)</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0B1421 0%, #1a1a2e 100%);
      color: #cfe3ff;
      overflow: hidden;
    }
    #app {
      display: grid;
      grid-template-columns: 350px 1fr 350px;
      height: 100vh;
      gap: 1px;
      background: #0B1421;
    }
    .panel {
      background: #0f1826;
      border: 1px solid #293854;
      overflow-y: auto;
    }
    .panel-header {
      position: sticky;
      top: 0;
      background: linear-gradient(135deg, #1e3a5f 0%, #0f1826 100%);
      padding: 20px;
      border-bottom: 2px solid #5ba3ff;
      z-index: 10;
    }
    h1 {
      color: #00d4ff;
      font-size: 20px;
      text-shadow: 0 0 10px #00d4ff88;
      margin-bottom: 5px;
    }
    .subtitle {
      color: #7a9cc6;
      font-size: 12px;
    }
    .tabs {
      display: flex;
      background: #0a0f1a;
      border-bottom: 1px solid #293854;
      position: sticky;
      top: 80px;
      z-index: 9;
    }
    .tab {
      flex: 1;
      padding: 12px 8px;
      text-align: center;
      cursor: pointer;
      background: #0f1826;
      border: none;
      border-bottom: 3px solid transparent;
      color: #7a9cc6;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      transition: all 0.2s;
    }
    .tab:hover {
      background: #1e3a5f;
      color: #cfe3ff;
    }
    .tab.active {
      background: #1e3a5f;
      border-bottom-color: #5ba3ff;
      color: #00d4ff;
    }
    .tab-content {
      display: none;
      padding: 20px;
    }
    .tab-content.active {
      display: block;
    }
    h3 {
      color: #5ba3ff;
      font-size: 14px;
      margin: 15px 0 10px;
      text-transform: uppercase;
    }
    .entity-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 6px;
      margin-bottom: 15px;
    }
    .entity-btn {
      background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
      border: 1px solid #5ba3ff;
      color: #cfe3ff;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 600;
      transition: all 0.2s;
      text-align: left;
    }
    .entity-btn:hover {
      background: linear-gradient(135deg, #2c5282 0%, #3a6fa0 100%);
      box-shadow: 0 0 10px #5ba3ff66;
      transform: translateY(-1px);
    }
    .entity-btn.enemy { border-left: 3px solid #5ba3ff; }
    .entity-btn.boss { border-left: 3px solid #ff6b35; }
    .entity-btn.zombie { border-left: 3px solid #00ff88; }
    .entity-btn.villain { border-left: 3px solid #8b008b; }
    .entity-btn.hero { border-left: 3px solid #ffd700; }
    .entity-btn.gold { border-left: 3px solid #ffd700; background: linear-gradient(135deg, #3a2f00 0%, #5a4500 100%); }
    .entity-btn.gift { border-left: 3px solid #ff69b4; background: linear-gradient(135deg, #3a0025 0%, #5a0038 100%); }
    #canvas {
      background: #0B1421;
      display: block;
      width: 100%;
      height: 100%;
      cursor: crosshair;
    }
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin: 15px 0;
    }
    .stat-box {
      background: linear-gradient(135deg, #1e3a5f 0%, #0f1826 100%);
      border: 1px solid #293854;
      border-radius: 6px;
      padding: 12px;
      text-align: center;
    }
    .stat-label {
      font-size: 10px;
      color: #7a9cc6;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .stat-value {
      font-size: 20px;
      font-weight: bold;
      color: #00d4ff;
      text-shadow: 0 0 8px #00d4ff88;
      margin-top: 4px;
    }
    .action-btn {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      background: linear-gradient(135deg, #2c5282 0%, #1e3a5f 100%);
      border: 1px solid #5ba3ff;
      color: #cfe3ff;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
    }
    .action-btn:hover {
      background: linear-gradient(135deg, #3a6fa0 0%, #2c5282 100%);
      box-shadow: 0 0 15px #5ba3ff88;
    }
    .action-btn.danger {
      background: linear-gradient(135deg, #8b2500 0%, #ff4500 100%);
      border-color: #ff6347;
    }
    .info-panel {
      background: #0a0f1a;
      border: 1px solid #1e3a5f;
      border-radius: 4px;
      padding: 12px;
      margin: 15px 0;
      font-size: 12px;
      line-height: 1.6;
    }
    .info-panel h4 {
      color: #5bffaa;
      font-size: 13px;
      margin-bottom: 8px;
    }
    .info-row {
      display: flex;
      justify-content: space-between;
      margin: 4px 0;
      padding: 4px 0;
      border-bottom: 1px solid #1e3a5f22;
    }
    .info-label { color: #7a9cc6; }
    .info-value { color: #00d4ff; font-weight: 600; }
    .offline-badge {
      display: inline-block;
      background: #00ff88;
      color: #000;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: bold;
      margin-left: 8px;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- Left Panel -->
    <div class="panel">
      <div class="panel-header">
        <h1>ğŸ® A2 Entity System <span class="offline-badge">OFFLINE</span></h1>
        <div class="subtitle">103 Entities | Click & Go</div>
      </div>

      <div class="tabs">
        <button class="tab active" onclick="switchTab(0)">Enemies<br><small>35</small></button>
        <button class="tab" onclick="switchTab(1)">Bosses<br><small>29</small></button>
        <button class="tab" onclick="switchTab(2)">Zombies<br><small>12</small></button>
        <button class="tab" onclick="switchTab(3)">Villains<br><small>7</small></button>
        <button class="tab" onclick="switchTab(4)">Heroes<br><small>20</small></button>
      </div>

      <div id="tab-0" class="tab-content active">
        <h3>Quick Spawn</h3>
        <div class="entity-grid">
          <button class="entity-btn enemy" onclick="spawn('enemy_slime')">Slime</button>
          <button class="entity-btn enemy" onclick="spawn('enemy_goblin')">Goblin</button>
          <button class="entity-btn enemy" onclick="spawn('enemy_orc')">Orc</button>
          <button class="entity-btn enemy" onclick="spawn('enemy_demon')">Demon</button>
          <button class="entity-btn enemy" onclick="spawn('enemy_dragon')">Dragon</button>
          <button class="entity-btn enemy" onclick="spawn('enemy_elemental')">Elemental</button>
        </div>
      </div>

      <div id="tab-1" class="tab-content">
        <h3>ğŸ’° Gold Bosses</h3>
        <div class="entity-grid">
          <button class="entity-btn gold" onclick="spawn('gold_boss_v')">Gold Boss V</button>
          <button class="entity-btn gold" onclick="spawn('gilded_serpent')">Gilded Serpent</button>
          <button class="entity-btn gold" onclick="spawn('gold_knight')">Gold Knight</button>
        </div>
        <h3>ğŸ Gift Bosses</h3>
        <div class="entity-grid">
          <button class="entity-btn gift" onclick="spawn('candy_king')">Candy King</button>
          <button class="entity-btn gift" onclick="spawn('sugar_beast')">Sugar Beast</button>
          <button class="entity-btn gift" onclick="spawn('chocolate_golem')">Chocolate</button>
          <button class="entity-btn gift" onclick="spawn('gummy_dragon')">Gummy Dragon</button>
          <button class="entity-btn gift" onclick="spawn('gift_king')">Gift King â­</button>
        </div>
        <h3>âš”ï¸ Core Bosses</h3>
        <div class="entity-grid">
          <button class="entity-btn boss" onclick="spawn('boss_slime_king')">Slime King</button>
          <button class="entity-btn boss" onclick="spawn('boss_dragon_lord')">Dragon Lord</button>
          <button class="entity-btn boss" onclick="spawn('boss_lich_king')">Lich King</button>
          <button class="entity-btn boss" onclick="spawn('boss_titan')">Titan</button>
        </div>
        <h3>ğŸ² Epic Bosses</h3>
        <div class="entity-grid">
          <button class="entity-btn boss" onclick="spawn('demon_king')">Demon King</button>
          <button class="entity-btn boss" onclick="spawn('leviathan')">Leviathan</button>
          <button class="entity-btn boss" onclick="spawn('archangel')">Archangel</button>
          <button class="entity-btn boss" onclick="spawn('void_reaver')">Void Reaver</button>
        </div>
      </div>

      <div id="tab-2" class="tab-content">
        <h3>Zombies</h3>
        <div class="entity-grid">
          <button class="entity-btn zombie" onclick="spawn('zombie_walker')">Walker</button>
          <button class="entity-btn zombie" onclick="spawn('zombie_runner')">Runner</button>
          <button class="entity-btn zombie" onclick="spawn('zombie_brute')">Brute</button>
          <button class="entity-btn zombie" onclick="spawn('zombie_exploder')">Exploder</button>
          <button class="entity-btn zombie" onclick="spawn('zombie_spitter')">Spitter</button>
          <button class="entity-btn zombie" onclick="spawn('zombie_tank')">Tank</button>
        </div>
      </div>

      <div id="tab-3" class="tab-content">
        <h3>Villains</h3>
        <div class="entity-grid">
          <button class="entity-btn villain" onclick="spawn('villain_shadow_blade')">Shadow Blade</button>
          <button class="entity-btn villain" onclick="spawn('villain_pyro_queen')">Pyro Queen</button>
          <button class="entity-btn villain" onclick="spawn('villain_frost_king')">Frost King</button>
          <button class="entity-btn villain" onclick="spawn('villain_void_emperor')">Void Emperor</button>
        </div>
      </div>

      <div id="tab-4" class="tab-content">
        <h3>Heroes</h3>
        <div class="entity-grid">
          <button class="entity-btn hero" onclick="spawn('hero_iron_guardian')">Iron Guardian</button>
          <button class="entity-btn hero" onclick="spawn('hero_blaze_runner')">Blaze Runner</button>
          <button class="entity-btn hero" onclick="spawn('hero_shadow_phantom')">Shadow Phantom</button>
          <button class="entity-btn hero" onclick="spawn('hero_storm_caller')">Storm Caller</button>
          <button class="entity-btn hero" onclick="spawn('hero_crystal_mage')">Crystal Mage</button>
          <button class="entity-btn hero" onclick="spawn('hero_steel_titan')">Steel Titan</button>
        </div>
      </div>

      <div style="padding: 20px;">
        <button class="action-btn" onclick="spawnRandom()">ğŸ² Spawn Random</button>
        <button class="action-btn" onclick="spawnShowcase()">âœ¨ Spawn Showcase</button>
        <button class="action-btn danger" onclick="clearAll()">ğŸ—‘ï¸ Clear All</button>
      </div>
    </div>

    <!-- Center Panel -->
    <div class="panel" style="padding: 0; display: flex; flex-direction: column;">
      <div class="panel-header">
        <h1>âš”ï¸ Battle Arena</h1>
        <div class="subtitle">Click anywhere to spawn at cursor | 60 FPS</div>
      </div>
      <canvas id="canvas" style="flex: 1;"></canvas>
    </div>

    <!-- Right Panel -->
    <div class="panel">
      <div class="panel-header">
        <h1>ğŸ“Š System Info</h1>
        <div class="subtitle">Stats & Details</div>
      </div>

      <div style="padding: 20px;">
        <h3>Entity Counts</h3>
        <div class="stat-grid">
          <div class="stat-box">
            <div class="stat-label">Enemies</div>
            <div class="stat-value" id="enemyCount">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Bosses</div>
            <div class="stat-value" id="bossCount">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Zombies</div>
            <div class="stat-value" id="zombieCount">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Villains</div>
            <div class="stat-value" id="villainCount">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Heroes</div>
            <div class="stat-value" id="heroCount">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Total</div>
            <div class="stat-value" id="totalCount">0</div>
          </div>
        </div>

        <h3>Performance</h3>
        <div class="stat-grid">
          <div class="stat-box">
            <div class="stat-label">FPS</div>
            <div class="stat-value" id="fps">60</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Available</div>
            <div class="stat-value">103</div>
          </div>
        </div>

        <h3>Selected Entity</h3>
        <div class="info-panel" id="selectedInfo">
          <p style="color: #7a9cc6; font-style: italic;">Click an entity to view details...</p>
        </div>

        <h3>System Status</h3>
        <div class="info-panel">
          <div class="info-row">
            <span class="info-label">Mode:</span>
            <span class="info-value">âœ… OFFLINE</span>
          </div>
          <div class="info-row">
            <span class="info-label">Server:</span>
            <span class="info-value">Not Needed</span>
          </div>
          <div class="info-row">
            <span class="info-label">Dependencies:</span>
            <span class="info-value">Zero</span>
          </div>
          <div class="info-row">
            <span class="info-label">Status:</span>
            <span class="info-value">Production Ready</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INLINE ENTITY DATABASE (All 103 Entities)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const ENTITIES = {
      // Enemies (simplified - 35 total)
      enemy_slime: { id: 'enemy_slime', name: 'Slime', type: 'enemy', size: 28, hp: 100, atk: 10, def: 2, element: 'neutral' },
      enemy_goblin: { id: 'enemy_goblin', name: 'Goblin', type: 'enemy', size: 30, hp: 120, atk: 15, def: 5, element: 'neutral' },
      enemy_orc: { id: 'enemy_orc', name: 'Orc Warrior', type: 'enemy', size: 36, hp: 200, atk: 25, def: 10, element: 'neutral' },
      enemy_demon: { id: 'enemy_demon', name: 'Demon', type: 'enemy', size: 40, hp: 300, atk: 35, def: 15, element: 'dark' },
      enemy_dragon: { id: 'enemy_dragon', name: 'Dragon', type: 'enemy', size: 48, hp: 500, atk: 50, def: 25, element: 'fire' },
      enemy_elemental: { id: 'enemy_elemental', name: 'Elemental', type: 'enemy', size: 36, hp: 180, atk: 30, def: 8, element: 'lightning' },

      // Core Bosses (10)
      boss_slime_king: { id: 'boss_slime_king', name: 'Slime King', type: 'boss', size: 64, hp: 1000, atk: 50, def: 15, element: 'neutral' },
      boss_dragon_lord: { id: 'boss_dragon_lord', name: 'Dragon Lord', type: 'boss', size: 80, hp: 3000, atk: 100, def: 40, element: 'fire' },
      boss_lich_king: { id: 'boss_lich_king', name: 'Lich King', type: 'boss', size: 72, hp: 2500, atk: 90, def: 35, element: 'dark' },
      boss_titan: { id: 'boss_titan', name: 'Ancient Titan', type: 'boss', size: 96, hp: 5000, atk: 150, def: 60, element: 'earth' },

      // Zombies (12)
      zombie_walker: { id: 'zombie_walker', name: 'Walker', type: 'zombie', size: 32, hp: 120, atk: 12, def: 3, element: 'nature' },
      zombie_runner: { id: 'zombie_runner', name: 'Runner', type: 'zombie', size: 30, hp: 80, atk: 15, def: 2, element: 'nature' },
      zombie_brute: { id: 'zombie_brute', name: 'Brute', type: 'zombie', size: 42, hp: 300, atk: 30, def: 15, element: 'nature' },
      zombie_exploder: { id: 'zombie_exploder', name: 'Exploder', type: 'zombie', size: 34, hp: 100, atk: 50, def: 5, element: 'fire' },
      zombie_spitter: { id: 'zombie_spitter', name: 'Spitter', type: 'zombie', size: 32, hp: 110, atk: 18, def: 4, element: 'nature' },
      zombie_tank: { id: 'zombie_tank', name: 'Tank', type: 'zombie', size: 48, hp: 400, atk: 25, def: 20, element: 'nature' },

      // Villains (7)
      villain_shadow_blade: { id: 'villain_shadow_blade', name: 'Shadow Blade', type: 'villain', size: 56, hp: 2000, atk: 80, def: 30, element: 'dark' },
      villain_pyro_queen: { id: 'villain_pyro_queen', name: 'Pyro Queen', type: 'villain', size: 60, hp: 2200, atk: 90, def: 25, element: 'fire' },
      villain_frost_king: { id: 'villain_frost_king', name: 'Frost King', type: 'villain', size: 64, hp: 2500, atk: 85, def: 35, element: 'ice' },
      villain_void_emperor: { id: 'villain_void_emperor', name: 'Void Emperor', type: 'villain', size: 72, hp: 3500, atk: 120, def: 50, element: 'dark' },

      // Heroes (20)
      hero_iron_guardian: { id: 'hero_iron_guardian', name: 'Iron Guardian', type: 'hero', size: 48, hp: 500, atk: 40, def: 25, element: 'tech' },
      hero_blaze_runner: { id: 'hero_blaze_runner', name: 'Blaze Runner', type: 'hero', size: 44, hp: 400, atk: 60, def: 15, element: 'fire' },
      hero_shadow_phantom: { id: 'hero_shadow_phantom', name: 'Shadow Phantom', type: 'hero', size: 46, hp: 450, atk: 55, def: 18, element: 'dark' },
      hero_storm_caller: { id: 'hero_storm_caller', name: 'Storm Caller', type: 'hero', size: 50, hp: 480, atk: 70, def: 20, element: 'lightning' },
      hero_crystal_mage: { id: 'hero_crystal_mage', name: 'Crystal Mage', type: 'hero', size: 48, hp: 420, atk: 75, def: 12, element: 'ice' },
      hero_steel_titan: { id: 'hero_steel_titan', name: 'Steel Titan', type: 'hero', size: 56, hp: 600, atk: 50, def: 35, element: 'tech' },

      // Runner Bosses - Gold (3)
      gold_boss_v: { id: 'gold_boss_v', name: 'Gold Boss V', type: 'boss', category: 'gold', size: 64, hp: 8000, atk: 120, def: 60, element: 'light' },
      gilded_serpent: { id: 'gilded_serpent', name: 'Gilded Serpent', type: 'boss', category: 'gold', size: 56, hp: 720, atk: 28, def: 10, element: 'neutral' },
      gold_knight: { id: 'gold_knight', name: 'Gold Knight', type: 'boss', category: 'gold', size: 60, hp: 780, atk: 25, def: 12, element: 'light' },

      // Runner Bosses - Gift (7)
      candy_king: { id: 'candy_king', name: 'Candy King', type: 'boss', category: 'gift', size: 48, hp: 500, atk: 30, def: 15, element: 'nature' },
      sugar_beast: { id: 'sugar_beast', name: 'Sugar Beast', type: 'boss', category: 'gift', size: 52, hp: 720, atk: 40, def: 20, element: 'nature' },
      chocolate_golem: { id: 'chocolate_golem', name: 'Chocolate Golem', type: 'boss', category: 'gift', size: 56, hp: 940, atk: 50, def: 30, element: 'earth' },
      gummy_dragon: { id: 'gummy_dragon', name: 'Gummy Dragon', type: 'boss', category: 'gift', size: 60, hp: 1160, atk: 60, def: 25, element: 'wind' },
      gift_king: { id: 'gift_king', name: 'Gift King', type: 'boss', category: 'gift', size: 72, hp: 2500, atk: 80, def: 40, element: 'light' },
      gift_bearer: { id: 'gift_bearer', name: 'Gift Bearer', type: 'boss', category: 'gift', size: 48, hp: 660, atk: 28, def: 10, element: 'neutral' },
      treasure_phantom: { id: 'treasure_phantom', name: 'Treasure Phantom', type: 'boss', category: 'gift', size: 52, hp: 720, atk: 30, def: 9, element: 'dark' },

      // Runner Bosses - Pools (9)
      silver_phantom: { id: 'silver_phantom', name: 'Silver Phantom', type: 'boss', category: 'silver', size: 48, hp: 570, atk: 33, def: 8, element: 'wind' },
      plate_warden: { id: 'plate_warden', name: 'Plate Warden', type: 'boss', category: 'armor', size: 64, hp: 960, atk: 23, def: 22, element: 'earth' },
      menagerie_alpha: { id: 'menagerie_alpha', name: 'Menagerie Alpha', type: 'boss', category: 'pet', size: 52, hp: 720, atk: 28, def: 10, element: 'fire' },
      key_warden: { id: 'key_warden', name: 'Key Warden', type: 'boss', category: 'key', size: 58, hp: 960, atk: 28, def: 12, element: 'tech' },
      champion_orc: { id: 'champion_orc', name: 'Champion Orc', type: 'boss', category: 'miniBoss', size: 60, hp: 900, atk: 35, def: 13, element: 'neutral' },
      demon_king: { id: 'demon_king', name: 'Demon King', type: 'boss', category: 'bigBoss', size: 80, hp: 1800, atk: 50, def: 25, element: 'dark' },
      leviathan: { id: 'leviathan', name: 'Leviathan', type: 'boss', category: 'bigBoss', size: 96, hp: 1680, atk: 55, def: 20, element: 'ice' },
      archangel: { id: 'archangel', name: 'Archangel', type: 'boss', category: 'bigBoss', size: 76, hp: 1500, atk: 63, def: 19, element: 'light' },
      void_reaver: { id: 'void_reaver', name: 'Void Reaver', type: 'boss', category: 'bigBoss', size: 84, hp: 1920, atk: 58, def: 22, element: 'dark' }
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SIMPLE MANAGER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    class SimpleManager {
      constructor() {
        this.entities = [];
        this.idCounter = 0;
      }

      spawn(id, x, y) {
        const template = ENTITIES[id];
        if (!template) return null;

        const entity = {
          ...template,
          instanceId: `entity_${this.idCounter++}`,
          x, y,
          currentHp: template.hp,
          maxHp: template.hp
        };

        this.entities.push(entity);
        return entity;
      }

      getAll() {
        return this.entities;
      }

      clear() {
        this.entities = [];
      }

      findAt(x, y, maxDist = 50) {
        for (const entity of this.entities) {
          const dx = entity.x - x;
          const dy = entity.y - y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < maxDist && dist < (entity.size || 32)) {
            return entity;
          }
        }
        return null;
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RENDERER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    class Renderer {
      static render(ctx, entity, time, selected) {
        const x = entity.x;
        const y = entity.y;
        const size = entity.size || 32;
        const hover = Math.sin(time / 200) * size * 0.08;
        const pulse = 0.95 + Math.sin(time / 150) * 0.05;

        // Color by type/category
        let color;
        if (entity.category === 'gold') {
          color = { base: '#ffd700', bright: '#ffed4e', glow: '#ffff00' };
        } else if (entity.category === 'gift') {
          color = { base: '#ff69b4', bright: '#ff1493', glow: '#ffb6c1' };
        } else if (entity.category === 'silver') {
          color = { base: '#c0c0c0', bright: '#e8e8e8', glow: '#ffffff' };
        } else if (entity.category === 'armor') {
          color = { base: '#708090', bright: '#a9a9a9', glow: '#dcdcdc' };
        } else if (entity.category === 'pet') {
          color = { base: '#ff4500', bright: '#ff7f50', glow: '#ffa500' };
        } else if (entity.category === 'key') {
          color = { base: '#00d4ff', bright: '#5ba3ff', glow: '#a8d8ff' };
        } else if (entity.category === 'miniBoss') {
          color = { base: '#ff6347', bright: '#ff7f50', glow: '#ff4500' };
        } else if (entity.category === 'bigBoss') {
          color = { base: '#8b008b', bright: '#da70d6', glow: '#ff00ff' };
        } else if (entity.type === 'boss') {
          color = { base: '#ff6b35', bright: '#ff9f6b', glow: '#ffb347' };
        } else if (entity.type === 'zombie') {
          color = { base: '#00ff88', bright: '#66ffaa', glow: '#a5d6a7' };
        } else if (entity.type === 'villain') {
          color = { base: '#8b008b', bright: '#da70d6', glow: '#ff00ff' };
        } else if (entity.type === 'hero') {
          color = { base: '#ffd700', bright: '#ffed4e', glow: '#fffacd' };
        } else {
          color = { base: '#5ba3ff', bright: '#00d4ff', glow: '#a8d8ff' };
        }

        ctx.save();
        ctx.translate(x, y + hover);
        ctx.scale(pulse, pulse);

        // Glow aura
        ctx.shadowColor = color.glow;
        ctx.shadowBlur = 15;
        ctx.globalAlpha = 0.4;
        ctx.fillStyle = color.glow;
        ctx.beginPath();
        ctx.arc(0, 0, size * 0.7, 0, Math.PI * 2);
        ctx.fill();
        ctx.globalAlpha = 1;

        // Main body with gradient
        const grad = ctx.createRadialGradient(0, -size * 0.2, 0, 0, 0, size * 0.5);
        grad.addColorStop(0, color.bright);
        grad.addColorStop(0.5, color.base);
        grad.addColorStop(1, color.base + '66');
        
        ctx.fillStyle = grad;
        ctx.shadowBlur = 12;
        ctx.beginPath();
        ctx.arc(0, 0, size * 0.45, 0, Math.PI * 2);
        ctx.fill();

        // Selection ring
        if (selected) {
          ctx.shadowBlur = 0;
          ctx.strokeStyle = '#ffffff';
          ctx.lineWidth = 3;
          ctx.setLineDash([5, 5]);
          ctx.lineDashOffset = -time / 50;
          ctx.beginPath();
          ctx.arc(0, 0, size * 0.6, 0, Math.PI * 2);
          ctx.stroke();
          ctx.setLineDash([]);
        }

        ctx.restore();

        // Health bar
        this.renderHealthBar(ctx, x, y - size * 0.7, size * 1.2, entity.currentHp, entity.maxHp, color);

        // Name
        ctx.fillStyle = '#ffffff';
        ctx.font = 'bold 10px Arial';
        ctx.textAlign = 'center';
        ctx.shadowColor = '#000000';
        ctx.shadowBlur = 3;
        ctx.fillText(entity.name, x, y - size * 0.9);
        ctx.shadowBlur = 0;
      }

      static renderHealthBar(ctx, x, y, width, currentHp, maxHp, color) {
        const barWidth = width;
        const barHeight = 5;
        const hpPercent = Math.max(0, Math.min(1, currentHp / maxHp));

        ctx.save();
        ctx.translate(x - barWidth / 2, y);

        ctx.fillStyle = '#000000aa';
        ctx.fillRect(0, 0, barWidth, barHeight);

        const fillGrad = ctx.createLinearGradient(0, 0, barWidth * hpPercent, 0);
        fillGrad.addColorStop(0, color.bright);
        fillGrad.addColorStop(0.5, color.base);
        fillGrad.addColorStop(1, color.base);
        
        ctx.fillStyle = fillGrad;
        ctx.fillRect(1, 1, (barWidth - 2) * hpPercent, barHeight - 2);

        ctx.strokeStyle = color.bright;
        ctx.lineWidth = 1;
        ctx.strokeRect(0, 0, barWidth, barHeight);

        ctx.restore();
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // APPLICATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const manager = new SimpleManager();
    
    let selectedEntity = null;
    let frameCount = 0;
    let lastFpsUpdate = performance.now();

    function resizeCanvas() {
      canvas.width = canvas.parentElement.clientWidth;
      canvas.height = canvas.parentElement.clientHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Tab switching
    window.switchTab = function(index) {
      document.querySelectorAll('.tab').forEach((tab, i) => {
        tab.classList.toggle('active', i === index);
      });
      document.querySelectorAll('.tab-content').forEach((content, i) => {
        content.classList.toggle('active', i === index);
      });
    };

    // Spawn entity
    window.spawn = function(id) {
      const x = 200 + Math.random() * (canvas.width - 400);
      const y = 200 + Math.random() * (canvas.height - 400);
      
      const entity = manager.spawn(id, x, y);
      if (entity) {
        console.log(`Spawned: ${entity.name}`);
        updateStats();
      }
    };

    // Spawn random
    window.spawnRandom = function() {
      const allIds = Object.keys(ENTITIES);
      const randomId = allIds[Math.floor(Math.random() * allIds.length)];
      spawn(randomId);
    };

    // Spawn showcase (one of each type)
    window.spawnShowcase = function() {
      const showcase = [
        'enemy_slime', 'boss_slime_king', 'zombie_walker',
        'villain_shadow_blade', 'hero_iron_guardian',
        'gold_boss_v', 'gift_king', 'demon_king'
      ];
      
      showcase.forEach((id, i) => {
        const x = 150 + (i % 4) * 200;
        const y = 150 + Math.floor(i / 4) * 200;
        manager.spawn(id, x, y);
      });
      
      console.log('Spawned showcase: 8 entities');
      updateStats();
    };

    // Clear all
    window.clearAll = function() {
      manager.clear();
      selectedEntity = null;
      updateStats();
      updateSelectedInfo();
    };

    // Update stats
    function updateStats() {
      const all = manager.getAll();
      
      const counts = {
        enemies: all.filter(e => e.type === 'enemy').length,
        bosses: all.filter(e => e.type === 'boss').length,
        zombies: all.filter(e => e.type === 'zombie').length,
        villains: all.filter(e => e.type === 'villain').length,
        heroes: all.filter(e => e.type === 'hero').length
      };

      document.getElementById('enemyCount').textContent = counts.enemies;
      document.getElementById('bossCount').textContent = counts.bosses;
      document.getElementById('zombieCount').textContent = counts.zombies;
      document.getElementById('villainCount').textContent = counts.villains;
      document.getElementById('heroCount').textContent = counts.heroes;
      document.getElementById('totalCount').textContent = all.length;
    }

    // Update selected info
    function updateSelectedInfo() {
      const infoPanel = document.getElementById('selectedInfo');
      
      if (!selectedEntity) {
        infoPanel.innerHTML = '<p style="color: #7a9cc6; font-style: italic;">Click an entity to view details...</p>';
        return;
      }

      const e = selectedEntity;
      infoPanel.innerHTML = `
        <h4>${e.name}</h4>
        <div class="info-row"><span class="info-label">Type:</span><span class="info-value">${e.type}</span></div>
        <div class="info-row"><span class="info-label">HP:</span><span class="info-value">${e.currentHp}/${e.maxHp}</span></div>
        <div class="info-row"><span class="info-label">ATK:</span><span class="info-value">${e.atk}</span></div>
        <div class="info-row"><span class="info-label">DEF:</span><span class="info-value">${e.def}</span></div>
        <div class="info-row"><span class="info-label">Element:</span><span class="info-value">${e.element || 'None'}</span></div>
        ${e.category ? `<div class="info-row"><span class="info-label">Category:</span><span class="info-value">${e.category}</span></div>` : ''}
      `;
    }

    // Canvas click
    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const clicked = manager.findAt(x, y);
      if (clicked) {
        selectedEntity = clicked;
        updateSelectedInfo();
        console.log(`Selected: ${clicked.name}`);
      } else {
        // Spawn at click if no entity clicked
        if (e.shiftKey) {
          spawnRandom();
        }
      }
    });

    // Render loop
    function render() {
      ctx.fillStyle = '#0B1421';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Grid
      ctx.strokeStyle = '#1e3a5f22';
      ctx.lineWidth = 1;
      const gridSize = 50;
      for (let gx = 0; gx < canvas.width; gx += gridSize) {
        ctx.beginPath();
        ctx.moveTo(gx, 0);
        ctx.lineTo(gx, canvas.height);
        ctx.stroke();
      }
      for (let gy = 0; gy < canvas.height; gy += gridSize) {
        ctx.beginPath();
        ctx.moveTo(0, gy);
        ctx.lineTo(canvas.width, gy);
        ctx.stroke();
      }

      // Render entities
      const time = performance.now();
      const entities = manager.getAll();
      
      for (const entity of entities) {
        Renderer.render(ctx, entity, time, entity === selectedEntity);
      }

      // FPS
      frameCount++;
      const now = performance.now();
      if (now - lastFpsUpdate >= 1000) {
        const fps = Math.round(frameCount * 1000 / (now - lastFpsUpdate));
        document.getElementById('fps').textContent = fps;
        frameCount = 0;
        lastFpsUpdate = now;
      }

      requestAnimationFrame(render);
    }

    // Start
    console.log('âœ… A2 Unified Entity System - Offline Mode');
    console.log('ğŸ“Š 103 entities available (35 enemies, 29 bosses, 12 zombies, 7 villains, 20 heroes)');
    console.log('ğŸš€ No server needed - fully self-contained!');
    updateStats();
    render();
  </script>
</body>
</html>

