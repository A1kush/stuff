<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>V2 Vehicle System - Boarding Types Showcase</title>
  <style>
    body { margin: 0; padding: 20px; background: #0a0a0a; color: #fff; font-family: sans-serif; }
    h1 { text-align: center; color: #00E5FF; text-shadow: 0 0 20px #00E5FF; }
    .showcase { max-width: 1600px; margin: 0 auto; }
    .info-panel { background: rgba(0,229,255,0.1); border: 2px solid #00E5FF; border-radius: 15px; padding: 25px; margin: 20px 0; }
    .info-panel h2 { color: #00E5FF; margin-top: 0; }
    .boarding-types { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 20px; }
    .boarding-type { background: rgba(154,107,255,0.1); border: 2px solid #9A6BFF; border-radius: 10px; padding: 15px; }
    .boarding-type h3 { color: #9A6BFF; margin-top: 0; font-size: 16px; }
    .boarding-type ul { margin: 10px 0; padding-left: 20px; color: #ccc; }
    .boarding-type li { margin: 5px 0; }
    .highlight { color: #00FF88; font-weight: bold; }
    .unique { color: #FFD700; font-weight: bold; }
    #game-canvas { border: 3px solid #00E5FF; box-shadow: 0 0 30px rgba(0,229,255,0.3); display: block; margin: 20px auto; background: #0a0e1a; }
    .controls { background: rgba(255,105,180,0.1); border: 2px solid #FF69B4; border-radius: 10px; padding: 15px; margin: 20px 0; text-align: center; }
    kbd { background: #333; padding: 6px 10px; border-radius: 4px; border: 2px solid #555; font-family: monospace; margin: 0 3px; }
    .status { font-size: 20px; color: #00FF88; text-align: center; margin: 15px 0; font-weight: bold; }
    .auto-info { text-align: center; color: #FFD700; margin: 10px 0; }
  </style>
</head>
<body>
  <div class="showcase">
    <h1>üöó V2 Vehicle System - Complete Boarding Types Showcase</h1>
    
    <div class="info-panel">
      <h2>üì¶ Complete Vehicle Library: 27 Vehicles</h2>
      <p>Demonstrating all unique character boarding positions across different vehicle types!</p>
      
      <div class="boarding-types">
        <div class="boarding-type">
          <h3>üèçÔ∏è Sitting ON Seat</h3>
          <ul>
            <li>Bike, Chopper</li>
            <li>Personal Bike/Chopper</li>
            <li>Buggy</li>
          </ul>
        </div>
        
        <div class="boarding-type">
          <h3>üöó Inside Cabin/Cockpit</h3>
          <ul>
            <li>Car, Personal Car</li>
            <li>Van, Bus, Train</li>
            <li>Hovercraft</li>
            <li>Mech Proto/Apex</li>
            <li>Tank, Heavy Transport</li>
            <li>Helicopter</li>
          </ul>
        </div>
        
        <div class="boarding-type">
          <h3>üéí Wearing/On Back</h3>
          <ul>
            <li>Jetpack, Personal Jetpack</li>
            <li class="highlight">Roller Skates (on feet!)</li>
          </ul>
        </div>
        
        <div class="boarding-type">
          <h3>üõπ Standing ON TOP</h3>
          <ul>
            <li>Skateboard Street</li>
            <li class="highlight">Scooter (on deck)</li>
            <li class="highlight">Hover Disc</li>
            <li class="highlight">Sled</li>
          </ul>
        </div>
        
        <div class="boarding-type">
          <h3>üõçÔ∏è Standing Behind/Pushing</h3>
          <ul>
            <li class="unique">Shopping Cart (x: -12 offset!)</li>
          </ul>
        </div>
        
        <div class="boarding-type">
          <h3>üéà Air Vehicles - Special</h3>
          <ul>
            <li>Balloon Ride (in basket)</li>
            <li class="unique">Glider (HANGING BELOW! y: +10)</li>
          </ul>
        </div>
        
        <div class="boarding-type">
          <h3>üåä Water Vehicles</h3>
          <ul>
            <li>Speedboat (at controls)</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="controls">
      <h3>üéÆ Manual Test Controls</h3>
      <p><kbd>‚Üê</kbd> <kbd>‚Üí</kbd> Walk &nbsp; <kbd>E</kbd> Board/Unboard &nbsp; <kbd>N</kbd> Next Vehicle &nbsp; <kbd>C</kbd> Change Character &nbsp; <kbd>A</kbd> Auto-Cycle Toggle</p>
    </div>
    
    <p class="status" id="status">Ready to showcase!</p>
    <p class="auto-info" id="auto-info">Press <kbd>A</kbd> to start auto-cycling through all vehicles</p>
    
    <canvas id="game-canvas" width="1400" height="800"></canvas>
    
    <div style="text-align: center; color: #666; margin-top: 20px;">
      <p>‚úÖ All 27 vehicles √ó 3 characters = 81 unique combinations!</p>
      <p>üéØ Flawless boarding logic - characters appear in correct positions for each vehicle type</p>
    </div>
  </div>
  
  <script>
    console.log('üöó V2 Vehicle System - Final Showcase Loading...');
    
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    const statusEl = document.getElementById('status');
    const autoInfoEl = document.getElementById('auto-info');
    
    // All 27 vehicles
    const vehicles = [
      { id: 'bike', name: 'Bike', type: 'Sitting ON', color: '#00E5FF', charY: -24 },
      { id: 'scooter', name: 'Scooter', type: 'Standing ON TOP', color: '#FF6B9D', charY: -28 },
      { id: 'skateboard', name: 'Skateboard', type: 'Standing ON TOP', color: '#FF88AA', charY: -32 },
      { id: 'shopping_cart', name: 'Shopping Cart', type: 'Pushing Behind', color: '#C0C0C0', charY: -26, charX: -12 },
      { id: 'roller_skates', name: 'Roller Skates', type: 'Wearing', color: '#FFD700', charY: -24 },
      { id: 'car', name: 'Car', type: 'Inside Cabin', color: '#FFD700', charY: -30 },
      { id: 'van', name: 'Van', type: 'Inside Cabin', color: '#4169E1', charY: -32, charX: 8 },
      { id: 'bus', name: 'Bus', type: 'Driver Seat (Left)', color: '#FFD700', charY: -36, charX: -20 },
      { id: 'train', name: 'Train', type: 'Conductor Position', color: '#DC143C', charY: -34, charX: -15 },
      { id: 'mech_proto', name: 'Mech Proto', type: 'Inside Cockpit', color: '#555577', charY: -32 },
      { id: 'mech_apex', name: 'Mech Apex', type: 'Inside Cockpit', color: '#667799', charY: -38 },
      { id: 'jetpack', name: 'Jetpack', type: 'Wearing', color: '#AA88FF', charY: -16 },
      { id: 'hover_disc', name: 'Hover Disc', type: 'Standing ON', color: '#00FFFF', charY: -30 },
      { id: 'hovercraft', name: 'Hovercraft', type: 'Inside', color: '#00FFFF', charY: -28 },
      { id: 'glider', name: 'Glider', type: 'HANGING BELOW!', color: '#87CEEB', charY: 10 },
      { id: 'balloon_ride', name: 'Balloon Ride', type: 'In Basket', color: '#FF69B4', charY: -18 },
      { id: 'helicopter', name: 'Helicopter', type: 'Pilot Seat', color: '#44AA44', charY: -24, charX: 8 },
      { id: 'tank', name: 'Tank', type: 'Inside Turret', color: '#3D5A3D', charY: -44 },
      { id: 'sled', name: 'Sled', type: 'Sitting ON', color: '#8B4513', charY: -24 },
      { id: 'chopper', name: 'Chopper', type: 'Sitting ON', color: '#FF6B35', charY: -26 },
      { id: 'buggy', name: 'Buggy', type: 'Sitting IN', color: '#FFFF00', charY: -28 },
      { id: 'heavy_transport', name: 'Heavy Transport', type: 'Inside Cabin', color: '#888888', charY: -42, charX: 10 },
      { id: 'speedboat', name: 'Speedboat', type: 'At Controls', color: '#3399FF', charY: -26, charX: 4 },
      { id: 'personal_bike', name: 'Personal Bike', type: 'Sitting ON', color: '#00FF88', charY: -22 },
      { id: 'personal_chopper', name: 'Personal Chopper', type: 'Sitting ON', color: '#FF4444', charY: -24 },
      { id: 'personal_jetpack', name: 'Personal Jetpack', type: 'Wearing', color: '#AA88FF', charY: -14 },
      { id: 'personal_car', name: 'Personal Car', type: 'Inside', color: '#FFAA00', charY: -28 }
    ];
    
    const characters = ['Warrior', 'Cat Angel', 'Cyborg'];
    
    let currentVehicleIndex = 0;
    let currentCharIndex = 0;
    let player = { x: 300, y: 450, vx: 0, vy: 0, facingLeft: false, isRiding: false };
    let vehicle = { x: 900, y: 450, vx: 0, vy: 0, facingLeft: false, rider: null, data: vehicles[0] };
    let keys = {};
    let cameraX = 0;
    const groundY = 500;
    let autoCycle = false;
    let autoCycleTimer = 0;
    const AUTO_CYCLE_INTERVAL = 4000; // 4 seconds per vehicle
    
    function updateVehicle() {
      vehicle.data = vehicles[currentVehicleIndex];
      vehicle.x = 900;
      vehicle.y = vehicle.data.charY === 10 ? groundY - 30 : groundY; // Glider floats higher
      vehicle.vx = 0;
      vehicle.facingLeft = false;
      if (player.isRiding) {
        player.isRiding = false;
        vehicle.rider = null;
        player.x = 300;
        player.y = groundY;
      }
      statusEl.textContent = `${vehicle.data.name} - Boarding Type: ${vehicle.data.type}`;
    }
    
    function renderVehicle(v, color) {
      ctx.save();
      ctx.translate(v.x - cameraX, v.y);
      if (v.facingLeft) ctx.scale(-1, 1);
      
      // Simple colored box representation
      ctx.fillStyle = color;
      ctx.fillRect(-30, -20, 60, 30);
      
      // Label
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 10px sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(v.data.name, 0, -25);
      
      ctx.restore();
    }
    
    function renderCharacter(char, offsetX, offsetY) {
      ctx.save();
      ctx.translate(char.x - cameraX + offsetX, char.y + offsetY);
      if (char.facingLeft) ctx.scale(-1, 1);
      
      // Warrior
      ctx.fillStyle = '#8B6F47';
      ctx.fillRect(-4, -16, 8, 8);
      ctx.fillStyle = '#FF4444';
      ctx.fillRect(-5, -18, 10, 4);
      ctx.fillStyle = '#FF0000';
      ctx.fillRect(-2, -14, 2, 2);
      ctx.fillRect(1, -14, 2, 2);
      ctx.fillStyle = '#333';
      ctx.fillRect(-5, -8, 10, 12);
      
      ctx.restore();
    }
    
    // Input
    window.addEventListener('keydown', (e) => {
      if (e.code === 'ArrowLeft' || e.code === 'ArrowRight' || e.code === 'ArrowUp' || e.code === 'KeyE' || e.code === 'KeyN' || e.code === 'KeyC' || e.code === 'KeyA') {
        e.preventDefault();
        keys[e.code] = true;
        
        if (e.code === 'KeyN') {
          currentVehicleIndex = (currentVehicleIndex + 1) % vehicles.length;
          updateVehicle();
          autoCycleTimer = 0;
        }
        
        if (e.code === 'KeyC') {
          currentCharIndex = (currentCharIndex + 1) % characters.length;
        }
        
        if (e.code === 'KeyA') {
          autoCycle = !autoCycle;
          autoCycleTimer = 0;
          autoInfoEl.textContent = autoCycle ? 'üîÑ Auto-Cycling ON - Showcasing all vehicles!' : 'Manual mode - Press N for next vehicle';
        }
        
        if (e.code === 'KeyE') {
          const dist = Math.abs(player.x - vehicle.x);
          if (dist < 100 && !player.isRiding && !vehicle.rider) {
            player.isRiding = true;
            vehicle.rider = player;
            statusEl.textContent = `‚úÖ ${vehicle.data.name} - ${vehicle.data.type} - Character visible!`;
          } else if (player.isRiding) {
            player.isRiding = false;
            vehicle.rider = null;
            player.x = vehicle.x + (player.facingLeft ? -70 : 70);
            statusEl.textContent = `${vehicle.data.name} - Ready to test next vehicle (Press N)`;
          }
        }
      }
    });
    
    window.addEventListener('keyup', (e) => {
      keys[e.code] = false;
    });
    
    // Update
    function update(dt) {
      // Auto-cycle
      if (autoCycle) {
        autoCycleTimer += dt * 1000;
        if (autoCycleTimer >= AUTO_CYCLE_INTERVAL) {
          currentVehicleIndex = (currentVehicleIndex + 1) % vehicles.length;
          updateVehicle();
          autoCycleTimer = 0;
        }
        
        // Auto-board after 1 second
        const dist = Math.abs(player.x - vehicle.x);
        if (!player.isRiding && dist < 100 && autoCycleTimer > 1000) {
          player.isRiding = true;
          vehicle.rider = player;
          statusEl.textContent = `‚úÖ ${vehicle.data.name} - ${vehicle.data.type} - Character ON/IN vehicle!`;
        }
      }
      
      if (player.isRiding) {
        if (keys.ArrowLeft) vehicle.vx -= 500 * dt;
        if (keys.ArrowRight) vehicle.vx += 500 * dt;
        vehicle.vx *= 0.9;
        vehicle.x += vehicle.vx * dt;
        vehicle.facingLeft = vehicle.vx < 0;
        player.x = vehicle.x;
        player.y = vehicle.y;
        player.facingLeft = vehicle.facingLeft;
      } else {
        if (keys.ArrowLeft) player.vx -= 800 * dt;
        if (keys.ArrowRight) player.vx += 800 * dt;
        player.vx *= 0.85;
        player.x += player.vx * dt;
        player.facingLeft = player.vx < 0;
        
        if (keys.ArrowUp && player.y >= groundY) {
          player.vy = -400;
        }
        player.vy += 1500 * dt;
        player.y += player.vy * dt;
        if (player.y >= groundY) {
          player.y = groundY;
          player.vy = 0;
        }
      }
      
      const target = player.isRiding ? vehicle.x : player.x;
      cameraX = target - 700;
      cameraX = Math.max(0, Math.min(3000, cameraX));
    }
    
    // Render
    function render(t) {
      ctx.fillStyle = '#0a0e1a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      ctx.fillStyle = '#1a1a2e';
      ctx.fillRect(0, groundY, canvas.width, 300);
      
      ctx.strokeStyle = '#2a2a3e';
      ctx.lineWidth = 1;
      for (let x = 0; x < 4000; x += 50) {
        ctx.beginPath();
        ctx.moveTo(x - cameraX, groundY);
        ctx.lineTo(x - cameraX, 800);
        ctx.stroke();
      }
      
      ctx.fillStyle = 'rgba(0,0,0,0.3)';
      ctx.beginPath();
      ctx.ellipse(vehicle.x - cameraX, groundY + 15, 40, 10, 0, 0, Math.PI * 2);
      ctx.fill();
      
      renderVehicle(vehicle, vehicle.data.color);
      
      if (!player.isRiding) {
        renderCharacter(player, 0, 0);
      } else {
        const charOffsetX = vehicle.data.charX || 0;
        const charOffsetY = vehicle.data.charY;
        renderCharacter(player, charOffsetX, charOffsetY);
        
        // Show boarding type label
        ctx.fillStyle = '#00FF88';
        ctx.font = 'bold 14px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`${vehicle.data.type.toUpperCase()}`, 700, 50);
      }
      
      // Instructions
      if (!player.isRiding && !autoCycle) {
        ctx.fillStyle = 'rgba(0,229,255,0.8)';
        ctx.font = 'bold 18px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`‚Üê Walk to ${vehicle.data.name} and press E ‚Üí`, 700, 80);
      }
      
      // Auto-cycle progress
      if (autoCycle) {
        const progress = (autoCycleTimer / AUTO_CYCLE_INTERVAL) * 100;
        ctx.fillStyle = 'rgba(0,229,255,0.3)';
        ctx.fillRect(500, 30, 400, 10);
        ctx.fillStyle = '#00E5FF';
        ctx.fillRect(500, 30, 400 * (progress / 100), 10);
        
        ctx.fillStyle = '#00E5FF';
        ctx.font = 'bold 12px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`Auto-cycling: ${Math.floor(progress)}% (${currentVehicleIndex + 1}/${vehicles.length})`, 700, 25);
      }
    }
    
    let lastTime = performance.now();
    function loop(t) {
      const dt = Math.min((t - lastTime) / 1000, 0.05);
      lastTime = t;
      update(dt);
      render(t);
      requestAnimationFrame(loop);
    }
    
    updateVehicle();
    loop(performance.now());
    
    console.log('‚úÖ Showcase loaded! 27 vehicles with unique boarding positions!');
    console.log('Press A for auto-cycle demo, or manually test with ‚Üê ‚Üí E N C');
  </script>
</body>
</html>

